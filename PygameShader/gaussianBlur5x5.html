<!DOCTYPE html>
<!-- Generated by Cython 0.29.36 -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cython: gaussianBlur5x5.pyx</title>
    <style type="text/css">
    
body.cython { font-family: courier; font-size: 12; }

.cython.tag  {  }
.cython.line { margin: 0em }
.cython.code { font-size: 9; color: #444444; display: none; margin: 0px 0px 0px 8px; border-left: 8px none; }

.cython.line .run { background-color: #B0FFB0; }
.cython.line .mis { background-color: #FFB0B0; }
.cython.code.run  { border-left: 8px solid #B0FFB0; }
.cython.code.mis  { border-left: 8px solid #FFB0B0; }

.cython.code .py_c_api  { color: red; }
.cython.code .py_macro_api  { color: #FF7000; }
.cython.code .pyx_c_api  { color: #FF3000; }
.cython.code .pyx_macro_api  { color: #FF7000; }
.cython.code .refnanny  { color: #FFA000; }
.cython.code .trace  { color: #FFA000; }
.cython.code .error_goto  { color: #FFA000; }

.cython.code .coerce  { color: #008000; border: 1px dotted #008000 }
.cython.code .py_attr { color: #FF0000; font-weight: bold; }
.cython.code .c_attr  { color: #0000FF; }
.cython.code .py_call { color: #FF0000; font-weight: bold; }
.cython.code .c_call  { color: #0000FF; }

.cython.score-0 {background-color: #FFFFff;}
.cython.score-1 {background-color: #FFFFe7;}
.cython.score-2 {background-color: #FFFFd4;}
.cython.score-3 {background-color: #FFFFc4;}
.cython.score-4 {background-color: #FFFFb6;}
.cython.score-5 {background-color: #FFFFaa;}
.cython.score-6 {background-color: #FFFF9f;}
.cython.score-7 {background-color: #FFFF96;}
.cython.score-8 {background-color: #FFFF8d;}
.cython.score-9 {background-color: #FFFF86;}
.cython.score-10 {background-color: #FFFF7f;}
.cython.score-11 {background-color: #FFFF79;}
.cython.score-12 {background-color: #FFFF73;}
.cython.score-13 {background-color: #FFFF6e;}
.cython.score-14 {background-color: #FFFF6a;}
.cython.score-15 {background-color: #FFFF66;}
.cython.score-16 {background-color: #FFFF62;}
.cython.score-17 {background-color: #FFFF5e;}
.cython.score-18 {background-color: #FFFF5b;}
.cython.score-19 {background-color: #FFFF57;}
.cython.score-20 {background-color: #FFFF55;}
.cython.score-21 {background-color: #FFFF52;}
.cython.score-22 {background-color: #FFFF4f;}
.cython.score-23 {background-color: #FFFF4d;}
.cython.score-24 {background-color: #FFFF4b;}
.cython.score-25 {background-color: #FFFF48;}
.cython.score-26 {background-color: #FFFF46;}
.cython.score-27 {background-color: #FFFF44;}
.cython.score-28 {background-color: #FFFF43;}
.cython.score-29 {background-color: #FFFF41;}
.cython.score-30 {background-color: #FFFF3f;}
.cython.score-31 {background-color: #FFFF3e;}
.cython.score-32 {background-color: #FFFF3c;}
.cython.score-33 {background-color: #FFFF3b;}
.cython.score-34 {background-color: #FFFF39;}
.cython.score-35 {background-color: #FFFF38;}
.cython.score-36 {background-color: #FFFF37;}
.cython.score-37 {background-color: #FFFF36;}
.cython.score-38 {background-color: #FFFF35;}
.cython.score-39 {background-color: #FFFF34;}
.cython.score-40 {background-color: #FFFF33;}
.cython.score-41 {background-color: #FFFF32;}
.cython.score-42 {background-color: #FFFF31;}
.cython.score-43 {background-color: #FFFF30;}
.cython.score-44 {background-color: #FFFF2f;}
.cython.score-45 {background-color: #FFFF2e;}
.cython.score-46 {background-color: #FFFF2d;}
.cython.score-47 {background-color: #FFFF2c;}
.cython.score-48 {background-color: #FFFF2b;}
.cython.score-49 {background-color: #FFFF2b;}
.cython.score-50 {background-color: #FFFF2a;}
.cython.score-51 {background-color: #FFFF29;}
.cython.score-52 {background-color: #FFFF29;}
.cython.score-53 {background-color: #FFFF28;}
.cython.score-54 {background-color: #FFFF27;}
.cython.score-55 {background-color: #FFFF27;}
.cython.score-56 {background-color: #FFFF26;}
.cython.score-57 {background-color: #FFFF26;}
.cython.score-58 {background-color: #FFFF25;}
.cython.score-59 {background-color: #FFFF24;}
.cython.score-60 {background-color: #FFFF24;}
.cython.score-61 {background-color: #FFFF23;}
.cython.score-62 {background-color: #FFFF23;}
.cython.score-63 {background-color: #FFFF22;}
.cython.score-64 {background-color: #FFFF22;}
.cython.score-65 {background-color: #FFFF22;}
.cython.score-66 {background-color: #FFFF21;}
.cython.score-67 {background-color: #FFFF21;}
.cython.score-68 {background-color: #FFFF20;}
.cython.score-69 {background-color: #FFFF20;}
.cython.score-70 {background-color: #FFFF1f;}
.cython.score-71 {background-color: #FFFF1f;}
.cython.score-72 {background-color: #FFFF1f;}
.cython.score-73 {background-color: #FFFF1e;}
.cython.score-74 {background-color: #FFFF1e;}
.cython.score-75 {background-color: #FFFF1e;}
.cython.score-76 {background-color: #FFFF1d;}
.cython.score-77 {background-color: #FFFF1d;}
.cython.score-78 {background-color: #FFFF1c;}
.cython.score-79 {background-color: #FFFF1c;}
.cython.score-80 {background-color: #FFFF1c;}
.cython.score-81 {background-color: #FFFF1c;}
.cython.score-82 {background-color: #FFFF1b;}
.cython.score-83 {background-color: #FFFF1b;}
.cython.score-84 {background-color: #FFFF1b;}
.cython.score-85 {background-color: #FFFF1a;}
.cython.score-86 {background-color: #FFFF1a;}
.cython.score-87 {background-color: #FFFF1a;}
.cython.score-88 {background-color: #FFFF1a;}
.cython.score-89 {background-color: #FFFF19;}
.cython.score-90 {background-color: #FFFF19;}
.cython.score-91 {background-color: #FFFF19;}
.cython.score-92 {background-color: #FFFF19;}
.cython.score-93 {background-color: #FFFF18;}
.cython.score-94 {background-color: #FFFF18;}
.cython.score-95 {background-color: #FFFF18;}
.cython.score-96 {background-color: #FFFF18;}
.cython.score-97 {background-color: #FFFF17;}
.cython.score-98 {background-color: #FFFF17;}
.cython.score-99 {background-color: #FFFF17;}
.cython.score-100 {background-color: #FFFF17;}
.cython.score-101 {background-color: #FFFF16;}
.cython.score-102 {background-color: #FFFF16;}
.cython.score-103 {background-color: #FFFF16;}
.cython.score-104 {background-color: #FFFF16;}
.cython.score-105 {background-color: #FFFF16;}
.cython.score-106 {background-color: #FFFF15;}
.cython.score-107 {background-color: #FFFF15;}
.cython.score-108 {background-color: #FFFF15;}
.cython.score-109 {background-color: #FFFF15;}
.cython.score-110 {background-color: #FFFF15;}
.cython.score-111 {background-color: #FFFF15;}
.cython.score-112 {background-color: #FFFF14;}
.cython.score-113 {background-color: #FFFF14;}
.cython.score-114 {background-color: #FFFF14;}
.cython.score-115 {background-color: #FFFF14;}
.cython.score-116 {background-color: #FFFF14;}
.cython.score-117 {background-color: #FFFF14;}
.cython.score-118 {background-color: #FFFF13;}
.cython.score-119 {background-color: #FFFF13;}
.cython.score-120 {background-color: #FFFF13;}
.cython.score-121 {background-color: #FFFF13;}
.cython.score-122 {background-color: #FFFF13;}
.cython.score-123 {background-color: #FFFF13;}
.cython.score-124 {background-color: #FFFF13;}
.cython.score-125 {background-color: #FFFF12;}
.cython.score-126 {background-color: #FFFF12;}
.cython.score-127 {background-color: #FFFF12;}
.cython.score-128 {background-color: #FFFF12;}
.cython.score-129 {background-color: #FFFF12;}
.cython.score-130 {background-color: #FFFF12;}
.cython.score-131 {background-color: #FFFF12;}
.cython.score-132 {background-color: #FFFF11;}
.cython.score-133 {background-color: #FFFF11;}
.cython.score-134 {background-color: #FFFF11;}
.cython.score-135 {background-color: #FFFF11;}
.cython.score-136 {background-color: #FFFF11;}
.cython.score-137 {background-color: #FFFF11;}
.cython.score-138 {background-color: #FFFF11;}
.cython.score-139 {background-color: #FFFF11;}
.cython.score-140 {background-color: #FFFF11;}
.cython.score-141 {background-color: #FFFF10;}
.cython.score-142 {background-color: #FFFF10;}
.cython.score-143 {background-color: #FFFF10;}
.cython.score-144 {background-color: #FFFF10;}
.cython.score-145 {background-color: #FFFF10;}
.cython.score-146 {background-color: #FFFF10;}
.cython.score-147 {background-color: #FFFF10;}
.cython.score-148 {background-color: #FFFF10;}
.cython.score-149 {background-color: #FFFF10;}
.cython.score-150 {background-color: #FFFF0f;}
.cython.score-151 {background-color: #FFFF0f;}
.cython.score-152 {background-color: #FFFF0f;}
.cython.score-153 {background-color: #FFFF0f;}
.cython.score-154 {background-color: #FFFF0f;}
.cython.score-155 {background-color: #FFFF0f;}
.cython.score-156 {background-color: #FFFF0f;}
.cython.score-157 {background-color: #FFFF0f;}
.cython.score-158 {background-color: #FFFF0f;}
.cython.score-159 {background-color: #FFFF0f;}
.cython.score-160 {background-color: #FFFF0f;}
.cython.score-161 {background-color: #FFFF0e;}
.cython.score-162 {background-color: #FFFF0e;}
.cython.score-163 {background-color: #FFFF0e;}
.cython.score-164 {background-color: #FFFF0e;}
.cython.score-165 {background-color: #FFFF0e;}
.cython.score-166 {background-color: #FFFF0e;}
.cython.score-167 {background-color: #FFFF0e;}
.cython.score-168 {background-color: #FFFF0e;}
.cython.score-169 {background-color: #FFFF0e;}
.cython.score-170 {background-color: #FFFF0e;}
.cython.score-171 {background-color: #FFFF0e;}
.cython.score-172 {background-color: #FFFF0e;}
.cython.score-173 {background-color: #FFFF0d;}
.cython.score-174 {background-color: #FFFF0d;}
.cython.score-175 {background-color: #FFFF0d;}
.cython.score-176 {background-color: #FFFF0d;}
.cython.score-177 {background-color: #FFFF0d;}
.cython.score-178 {background-color: #FFFF0d;}
.cython.score-179 {background-color: #FFFF0d;}
.cython.score-180 {background-color: #FFFF0d;}
.cython.score-181 {background-color: #FFFF0d;}
.cython.score-182 {background-color: #FFFF0d;}
.cython.score-183 {background-color: #FFFF0d;}
.cython.score-184 {background-color: #FFFF0d;}
.cython.score-185 {background-color: #FFFF0d;}
.cython.score-186 {background-color: #FFFF0d;}
.cython.score-187 {background-color: #FFFF0c;}
.cython.score-188 {background-color: #FFFF0c;}
.cython.score-189 {background-color: #FFFF0c;}
.cython.score-190 {background-color: #FFFF0c;}
.cython.score-191 {background-color: #FFFF0c;}
.cython.score-192 {background-color: #FFFF0c;}
.cython.score-193 {background-color: #FFFF0c;}
.cython.score-194 {background-color: #FFFF0c;}
.cython.score-195 {background-color: #FFFF0c;}
.cython.score-196 {background-color: #FFFF0c;}
.cython.score-197 {background-color: #FFFF0c;}
.cython.score-198 {background-color: #FFFF0c;}
.cython.score-199 {background-color: #FFFF0c;}
.cython.score-200 {background-color: #FFFF0c;}
.cython.score-201 {background-color: #FFFF0c;}
.cython.score-202 {background-color: #FFFF0c;}
.cython.score-203 {background-color: #FFFF0b;}
.cython.score-204 {background-color: #FFFF0b;}
.cython.score-205 {background-color: #FFFF0b;}
.cython.score-206 {background-color: #FFFF0b;}
.cython.score-207 {background-color: #FFFF0b;}
.cython.score-208 {background-color: #FFFF0b;}
.cython.score-209 {background-color: #FFFF0b;}
.cython.score-210 {background-color: #FFFF0b;}
.cython.score-211 {background-color: #FFFF0b;}
.cython.score-212 {background-color: #FFFF0b;}
.cython.score-213 {background-color: #FFFF0b;}
.cython.score-214 {background-color: #FFFF0b;}
.cython.score-215 {background-color: #FFFF0b;}
.cython.score-216 {background-color: #FFFF0b;}
.cython.score-217 {background-color: #FFFF0b;}
.cython.score-218 {background-color: #FFFF0b;}
.cython.score-219 {background-color: #FFFF0b;}
.cython.score-220 {background-color: #FFFF0b;}
.cython.score-221 {background-color: #FFFF0b;}
.cython.score-222 {background-color: #FFFF0a;}
.cython.score-223 {background-color: #FFFF0a;}
.cython.score-224 {background-color: #FFFF0a;}
.cython.score-225 {background-color: #FFFF0a;}
.cython.score-226 {background-color: #FFFF0a;}
.cython.score-227 {background-color: #FFFF0a;}
.cython.score-228 {background-color: #FFFF0a;}
.cython.score-229 {background-color: #FFFF0a;}
.cython.score-230 {background-color: #FFFF0a;}
.cython.score-231 {background-color: #FFFF0a;}
.cython.score-232 {background-color: #FFFF0a;}
.cython.score-233 {background-color: #FFFF0a;}
.cython.score-234 {background-color: #FFFF0a;}
.cython.score-235 {background-color: #FFFF0a;}
.cython.score-236 {background-color: #FFFF0a;}
.cython.score-237 {background-color: #FFFF0a;}
.cython.score-238 {background-color: #FFFF0a;}
.cython.score-239 {background-color: #FFFF0a;}
.cython.score-240 {background-color: #FFFF0a;}
.cython.score-241 {background-color: #FFFF0a;}
.cython.score-242 {background-color: #FFFF0a;}
.cython.score-243 {background-color: #FFFF0a;}
.cython.score-244 {background-color: #FFFF0a;}
.cython.score-245 {background-color: #FFFF0a;}
.cython.score-246 {background-color: #FFFF09;}
.cython.score-247 {background-color: #FFFF09;}
.cython.score-248 {background-color: #FFFF09;}
.cython.score-249 {background-color: #FFFF09;}
.cython.score-250 {background-color: #FFFF09;}
.cython.score-251 {background-color: #FFFF09;}
.cython.score-252 {background-color: #FFFF09;}
.cython.score-253 {background-color: #FFFF09;}
.cython.score-254 {background-color: #FFFF09;}
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.cython .hll { background-color: #ffffcc }
.cython { background: #f8f8f8; }
.cython .c { color: #3D7B7B; font-style: italic } /* Comment */
.cython .err { border: 1px solid #FF0000 } /* Error */
.cython .k { color: #008000; font-weight: bold } /* Keyword */
.cython .o { color: #666666 } /* Operator */
.cython .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cython .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cython .cp { color: #9C6500 } /* Comment.Preproc */
.cython .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.cython .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cython .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.cython .gd { color: #A00000 } /* Generic.Deleted */
.cython .ge { font-style: italic } /* Generic.Emph */
.cython .gr { color: #E40000 } /* Generic.Error */
.cython .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.cython .gi { color: #008400 } /* Generic.Inserted */
.cython .go { color: #717171 } /* Generic.Output */
.cython .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.cython .gs { font-weight: bold } /* Generic.Strong */
.cython .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.cython .gt { color: #0044DD } /* Generic.Traceback */
.cython .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.cython .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.cython .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.cython .kp { color: #008000 } /* Keyword.Pseudo */
.cython .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.cython .kt { color: #B00040 } /* Keyword.Type */
.cython .m { color: #666666 } /* Literal.Number */
.cython .s { color: #BA2121 } /* Literal.String */
.cython .na { color: #687822 } /* Name.Attribute */
.cython .nb { color: #008000 } /* Name.Builtin */
.cython .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.cython .no { color: #880000 } /* Name.Constant */
.cython .nd { color: #AA22FF } /* Name.Decorator */
.cython .ni { color: #717171; font-weight: bold } /* Name.Entity */
.cython .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.cython .nf { color: #0000FF } /* Name.Function */
.cython .nl { color: #767600 } /* Name.Label */
.cython .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.cython .nt { color: #008000; font-weight: bold } /* Name.Tag */
.cython .nv { color: #19177C } /* Name.Variable */
.cython .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.cython .w { color: #bbbbbb } /* Text.Whitespace */
.cython .mb { color: #666666 } /* Literal.Number.Bin */
.cython .mf { color: #666666 } /* Literal.Number.Float */
.cython .mh { color: #666666 } /* Literal.Number.Hex */
.cython .mi { color: #666666 } /* Literal.Number.Integer */
.cython .mo { color: #666666 } /* Literal.Number.Oct */
.cython .sa { color: #BA2121 } /* Literal.String.Affix */
.cython .sb { color: #BA2121 } /* Literal.String.Backtick */
.cython .sc { color: #BA2121 } /* Literal.String.Char */
.cython .dl { color: #BA2121 } /* Literal.String.Delimiter */
.cython .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.cython .s2 { color: #BA2121 } /* Literal.String.Double */
.cython .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.cython .sh { color: #BA2121 } /* Literal.String.Heredoc */
.cython .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.cython .sx { color: #008000 } /* Literal.String.Other */
.cython .sr { color: #A45A77 } /* Literal.String.Regex */
.cython .s1 { color: #BA2121 } /* Literal.String.Single */
.cython .ss { color: #19177C } /* Literal.String.Symbol */
.cython .bp { color: #008000 } /* Name.Builtin.Pseudo */
.cython .fm { color: #0000FF } /* Name.Function.Magic */
.cython .vc { color: #19177C } /* Name.Variable.Class */
.cython .vg { color: #19177C } /* Name.Variable.Global */
.cython .vi { color: #19177C } /* Name.Variable.Instance */
.cython .vm { color: #19177C } /* Name.Variable.Magic */
.cython .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>
</head>
<body class="cython">
<p><span style="border-bottom: solid 1px grey;">Generated by Cython 0.29.36</span></p>
<p>
    <span style="background-color: #FFFF00">Yellow lines</span> hint at Python interaction.<br />
    Click on a line that starts with a "<code>+</code>" to see the C code that Cython generated for it.
</p>
<p>Raw output: <a href="gaussianBlur5x5.cpp">gaussianBlur5x5.cpp</a></p>
<div class="cython"><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">001</span>: <span class="c"># cython: binding=False, boundscheck=False, wraparound=False, nonecheck=False, cdivision=True, profile=False</span></pre>
<pre class='cython code score-8 '>  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_test, __pyx_t_7) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 1, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">002</span>: <span class="c"># cython: optimize.use_switch=True</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">003</span>: <span class="c"># cython: warn.maybe_uninitialized=False</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">004</span>: <span class="c"># cython: warn.unused=False</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">005</span>: <span class="c"># cython: warn.unused_result=False</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">006</span>: <span class="c"># cython: warn.unused_arg=False</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">007</span>: <span class="c"># cython: language_level=3</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">008</span>: <span class="c"># encoding: utf-8</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">009</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">010</span>: <span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">011</span>: <span class="sd">                 GNU GENERAL PUBLIC LICENSE</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">012</span>: <span class="sd">                       Version 3, 29 June 2007</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">013</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">014</span>: <span class="sd"> Copyright (C) 2007 Free Software Foundation, Inc. &lt;https://fsf.org/&gt;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">015</span>: <span class="sd"> Everyone is permitted to copy and distribute verbatim copies</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">016</span>: <span class="sd"> of this license document, but changing it is not allowed.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">017</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">018</span>: <span class="sd">Copyright Yoann Berenguer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">019</span>: <span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">020</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">021</span>: <span class="c"># NUMPY IS REQUIRED</span></pre>
<pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">022</span>: <span class="k">from</span> <span class="nn">pygame.surfarray</span> <span class="k">import</span> <span class="n">pixels3d</span><span class="p">,</span> <span class="n">array_alpha</span></pre>
<pre class='cython code score-29 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_pixels3d);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_pixels3d);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_pixels3d);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_array_alpha);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_array_alpha);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_n_s_array_alpha);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_pygame_surfarray, __pyx_t_1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_pixels3d);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_pixels3d, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 22, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_array_alpha);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_array_alpha, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 22, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">023</span>: <span class="k">from</span> <span class="nn">pygame</span> <span class="k">import</span> <span class="n">Surface</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 23, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_Surface);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_Surface);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_Surface);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_pygame, __pyx_t_2, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 23, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_Surface);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 23, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_Surface, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 23, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">024</span>: <span class="k">from</span> <span class="nn">pygame.image</span> <span class="k">import</span> <span class="n">frombuffer</span></pre>
<pre class='cython code score-19 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_frombuffer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_frombuffer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_frombuffer);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_pygame_image, __pyx_t_1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 24, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_frombuffer);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_frombuffer, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 24, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">025</span>: </pre>
<pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">026</span>: <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-7 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L7_try_end;
    __pyx_L2_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/* … */
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_4);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_5);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_3, __pyx_t_4, __pyx_t_5);
    goto __pyx_L1_error;
    __pyx_L7_try_end:;
  }
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">027</span>:     <span class="k">import</span> <span class="nn">numpy</span></pre>
<pre class='cython code score-8 '>      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_numpy, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 27, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_numpy, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 27, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-219" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">028</span>:     <span class="k">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">ndarray</span><span class="p">,</span> <span class="n">zeros</span><span class="p">,</span> <span class="n">empty</span><span class="p">,</span> <span class="n">uint8</span><span class="p">,</span> <span class="n">int32</span><span class="p">,</span> <span class="n">float64</span><span class="p">,</span> <span class="n">float32</span><span class="p">,</span> <span class="w">\</span></pre>
<pre class='cython code score-219 '>      __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(21);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_ndarray);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_ndarray);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_ndarray);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_zeros);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_zeros);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 1, __pyx_n_s_zeros);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_empty);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_empty);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 2, __pyx_n_s_empty);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_uint8);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_uint8);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 3, __pyx_n_s_uint8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_int32);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_int32);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 4, __pyx_n_s_int32);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_float64);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_float64);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 5, __pyx_n_s_float64);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_float32);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_float32);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 6, __pyx_n_s_float32);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_dstack);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_dstack);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 7, __pyx_n_s_dstack);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_full);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_full);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 8, __pyx_n_s_full);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_ones);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_ones);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 9, __pyx_n_s_ones);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_asarray);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_asarray);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 10, __pyx_n_s_asarray);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_ascontiguousarray);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_ascontiguousarray);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 11, __pyx_n_s_ascontiguousarray);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_full_like);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_full_like);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 12, __pyx_n_s_full_like);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_add);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_add);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 13, __pyx_n_s_add);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_putmask);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_putmask);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 14, __pyx_n_s_putmask);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_int16);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_int16);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 15, __pyx_n_s_int16);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_arange);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_arange);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 16, __pyx_n_s_arange);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_repeat);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_repeat);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 17, __pyx_n_s_repeat);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_newaxis);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_newaxis);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 18, __pyx_n_s_newaxis);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_sum);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_sum);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 19, __pyx_n_s_sum);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_divide);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_divide);
      <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 20, __pyx_n_s_divide);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_numpy, __pyx_t_2, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_ndarray);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ndarray, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_zeros, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_empty, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_uint8);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_uint8, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_int32, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_float64);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_float64, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_float32, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_dstack);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_dstack, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_full);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_full, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_ones);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ones, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_asarray, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_ascontiguousarray);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ascontiguousarray, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_full_like);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_full_like, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_add);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_add, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_putmask);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_putmask, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 29, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_int16);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_int16, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 30, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_arange);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_arange, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 30, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_repeat);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_repeat, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 30, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_newaxis);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_newaxis, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 30, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_sum);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_sum, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 30, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_divide);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L2_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_divide, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 30, __pyx_L2_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">029</span>:         <span class="n">dstack</span><span class="p">,</span> <span class="n">full</span><span class="p">,</span> <span class="n">ones</span><span class="p">,</span> <span class="n">asarray</span><span class="p">,</span> <span class="n">ascontiguousarray</span><span class="p">,</span> <span class="n">full_like</span><span class="p">,</span> <span class="n">add</span><span class="p">,</span> <span class="n">putmask</span><span class="p">,</span><span class="w">\</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">030</span>:         <span class="n">int16</span><span class="p">,</span> <span class="n">arange</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="n">newaxis</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">divide</span></pre>
<pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">031</span>: <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span></pre>
<pre class='cython code score-6 '>    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_builtin_ImportError);
    if (__pyx_t_6) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_1, &amp;__pyx_t_2, &amp;__pyx_t_7) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 31, __pyx_L4_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">032</span>:     <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&lt;numpy&gt; library is missing on your system.&quot;</span></pre>
<pre class='cython code score-8 '>      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_print, __pyx_tuple__26, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 32, __pyx_L4_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
/* … */
  __pyx_tuple__26 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_u_numpy_library_is_missing_on_you);<span class='error_goto'> if (unlikely(!__pyx_tuple__26)) __PYX_ERR(0, 32, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__26);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__26);
</pre><pre class="cython line score-0">&#xA0;<span class="">033</span>:           <span class="s">&quot;</span><span class="se">\n</span><span class="s">Try: </span><span class="se">\n</span><span class="s">   C:</span><span class="se">\\</span><span class="s">pip install numpy on a window command prompt.&quot;</span><span class="p">)</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">034</span>:     <span class="k">raise</span> <span class="ne">SystemExit</span></pre>
<pre class='cython code score-2 '>      <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_builtin_SystemExit, 0, 0, 0);
      <span class='error_goto'>__PYX_ERR(0, 34, __pyx_L4_except_error)</span>
    }
    goto __pyx_L4_except_error;
    __pyx_L4_except_error:;
</pre><pre class="cython line score-0">&#xA0;<span class="">035</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">036</span>: <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  {
    /*try:*/ {
/* … */
    }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">037</span>:     <span class="k">cimport</span> <span class="nn">cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">038</span>:     <span class="k">from</span> <span class="nn">cython.parallel</span> <span class="k">cimport</span> <span class="n">prange</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">039</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">040</span>: <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">041</span>:     <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&lt;cython&gt; library is missing on your system.&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">042</span>:           <span class="s">&quot;</span><span class="se">\n</span><span class="s">Try: </span><span class="se">\n</span><span class="s">   C:</span><span class="se">\\</span><span class="s">pip install cython on a window command prompt.&quot;</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">043</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">044</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">045</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">046</span>: <span class="cp">DEF</span> <span class="n">SCHEDULE</span> <span class="o">=</span> <span class="s">&#39;static&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">047</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">048</span>: <span class="cp">DEF</span> <span class="n">OPENMP</span> <span class="o">=</span> <span class="bp">True</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">049</span>: <span class="c"># num_threads – The num_threads argument indicates how many threads the team should consist of.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">050</span>: <span class="c"># If not given, OpenMP will decide how many threads to use.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">051</span>: <span class="c"># Typically this is the number of cores available on the machine. However,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">052</span>: <span class="c"># this may be controlled through the omp_set_num_threads() function,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">053</span>: <span class="c"># or through the OMP_NUM_THREADS environment variable.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">054</span>: <span class="cp">DEF</span> <span class="n">THREAD_NUMBER</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">055</span>: <span class="k">if</span> <span class="n">OPENMP</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">056</span>:     <span class="cp">DEF</span> <span class="n">THREAD_NUMBER</span> <span class="o">=</span> <span class="mf">8</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">057</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">058</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">059</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">060</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">061</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">nonecheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">062</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">cdivision</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">063</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">064</span>: <span class="k">cpdef</span> <span class="nf">blur5x5_array24_inplace_c</span><span class="p">(</span><span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="n">rgb_array_</span><span class="p">):</span></pre>
<pre class='cython code score-19 '>static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_1blur5x5_array24_inplace_c(PyObject *__pyx_self, PyObject *__pyx_arg_rgb_array_); /*proto*/
static PyObject *__pyx_f_12PygameShader_15gaussianBlur5x5_blur5x5_array24_inplace_c(__Pyx_memviewslice __pyx_v_rgb_array_, CYTHON_UNUSED int __pyx_skip_dispatch) {
  int __pyx_v_w;
  int __pyx_v_h;
  CYTHON_UNUSED int __pyx_v_dim;
  CYTHON_UNUSED PyObject *__pyx_v_e = NULL;
  float __pyx_v_kernel[5];
  short __pyx_v_kernel_half;
  __Pyx_memviewslice __pyx_v_convolve = { 0, 0, { 0 }, { 0 }, { 0 } };
  int __pyx_v_x;
  int __pyx_v_y;
  int __pyx_v_xx;
  int __pyx_v_yy;
  float __pyx_v_k;
  float __pyx_v_r;
  float __pyx_v_g;
  float __pyx_v_b;
  char __pyx_v_kernel_offset;
  unsigned char __pyx_v_red;
  unsigned char __pyx_v_green;
  unsigned char __pyx_v_blue;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("blur5x5_array24_inplace_c", 0);
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_21, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_array24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_e);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_convolve, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_1blur5x5_array24_inplace_c(PyObject *__pyx_self, PyObject *__pyx_arg_rgb_array_); /*proto*/
static char __pyx_doc_12PygameShader_15gaussianBlur5x5_blur5x5_array24_inplace_c[] = "\n    # Gaussian kernel 5x5\n        # |1   4   6   4  1|\n        # |4  16  24  16  4|\n        # |6  24  36  24  6|  x 1/256\n        # |4  16  24  16  4|\n        # |1  4    6   4  1|\n    This method is using convolution property and process the image in two passes,\n    first the horizontal convolution and last the vertical convolution\n    pixels convoluted outside image edges will be set to adjacent edge value\n\n    :param rgb_array_: numpy.ndarray type (w, h, 3) uint8 \n    :return: Return 24-bit a numpy.ndarray type (w, h, 3) uint8\n    ";
static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_1blur5x5_array24_inplace_c(PyObject *__pyx_self, PyObject *__pyx_arg_rgb_array_) {
  __Pyx_memviewslice __pyx_v_rgb_array_ = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("blur5x5_array24_inplace_c (wrapper)", 0);
  assert(__pyx_arg_rgb_array_); {
    __pyx_v_rgb_array_ = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsdsds_unsigned_char</span>(__pyx_arg_rgb_array_, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_rgb_array_.memview)) __PYX_ERR(0, 64, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_array24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_12PygameShader_15gaussianBlur5x5_blur5x5_array24_inplace_c(__pyx_self, __pyx_v_rgb_array_);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_12PygameShader_15gaussianBlur5x5_blur5x5_array24_inplace_c(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_rgb_array_) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("blur5x5_array24_inplace_c", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  if (unlikely(!__pyx_v_rgb_array_.memview)) { <span class='pyx_c_api'>__Pyx_RaiseUnboundLocalError</span>("rgb_array_"); <span class='error_goto'>__PYX_ERR(0, 64, __pyx_L1_error)</span> }
  __pyx_t_1 = __pyx_f_12PygameShader_15gaussianBlur5x5_blur5x5_array24_inplace_c(__pyx_v_rgb_array_, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 64, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_array24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_rgb_array_, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">065</span>: <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">066</span>: <span class="sd">    # Gaussian kernel 5x5</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">067</span>: <span class="sd">        # |1   4   6   4  1|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">068</span>: <span class="sd">        # |4  16  24  16  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">069</span>: <span class="sd">        # |6  24  36  24  6|  x 1/256</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">070</span>: <span class="sd">        # |4  16  24  16  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">071</span>: <span class="sd">        # |1  4    6   4  1|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">072</span>: <span class="sd">    This method is using convolution property and process the image in two passes,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">073</span>: <span class="sd">    first the horizontal convolution and last the vertical convolution</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">074</span>: <span class="sd">    pixels convoluted outside image edges will be set to adjacent edge value</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">075</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">076</span>: <span class="sd">    :param rgb_array_: numpy.ndarray type (w, h, 3) uint8 </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">077</span>: <span class="sd">    :return: Return 24-bit a numpy.ndarray type (w, h, 3) uint8</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">078</span>: <span class="sd">    &quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">079</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">080</span>:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">w</span><span class="p">,</span> <span class="nf">h</span><span class="p">,</span> <span class="nf">dim</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">081</span>:     <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-10 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
/* … */
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    goto __pyx_L1_error;
    __pyx_L8_try_end:;
  }
</pre><pre class="cython line score-83" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">082</span>:         <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">dim</span> <span class="o">=</span> <span class="p">(&lt;</span><span class="kt">object</span><span class="p">&gt;</span><span class="n">rgb_array_</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-83 '>      __pyx_t_4 = __pyx_memoryview_fromslice(__pyx_v_rgb_array_, 3, (PyObject *(*)(char *)) __pyx_memview_get_unsigned_char, (int (*)(char *, PyObject *)) __pyx_memview_set_unsigned_char, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_shape);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetSlice</span>(__pyx_t_5, 0, 3, NULL, NULL, &amp;__pyx_slice_, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_4))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_4))) {
        PyObject* sequence = __pyx_t_4;
        Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
        if (unlikely(size != 3)) {
          if (size &gt; 3) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(3);
          else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
          <span class='error_goto'>__PYX_ERR(0, 82, __pyx_L3_error)</span>
        }
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
          __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
          __pyx_t_6 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
          __pyx_t_7 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
        } else {
          __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
          __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
          __pyx_t_7 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
        }
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
        __pyx_t_7 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        #endif
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        Py_ssize_t index = -1;
        __pyx_t_8 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 82, __pyx_L3_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_9 = Py_TYPE(__pyx_t_8)-&gt;tp_iternext;
        index = 0; __pyx_t_5 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_5)) goto __pyx_L9_unpacking_failed;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        index = 1; __pyx_t_6 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_6)) goto __pyx_L9_unpacking_failed;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
        index = 2; __pyx_t_7 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_7)) goto __pyx_L9_unpacking_failed;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_9(__pyx_t_8), 3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 82, __pyx_L3_error)</span>
        __pyx_t_9 = NULL;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        goto __pyx_L10_unpacking_done;
        __pyx_L9_unpacking_failed:;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_9 = NULL;
        if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
        <span class='error_goto'>__PYX_ERR(0, 82, __pyx_L3_error)</span>
        __pyx_L10_unpacking_done:;
      }
      __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_5); if (unlikely((__pyx_t_10 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 82, __pyx_L3_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_6); if (unlikely((__pyx_t_11 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 82, __pyx_L3_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_7); if (unlikely((__pyx_t_12 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 82, __pyx_L3_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_v_w = __pyx_t_10;
      __pyx_v_h = __pyx_t_11;
      __pyx_v_dim = __pyx_t_12;
/* … */
  __pyx_slice_ = <span class='py_c_api'>PySlice_New</span>(Py_None, __pyx_int_3, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice_)) __PYX_ERR(0, 82, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice_);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice_);
</pre><pre class="cython line score-0">&#xA0;<span class="">083</span>: </pre>
<pre class="cython line score-20" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">084</span>:     <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></pre>
<pre class='cython code score-20 '>    __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(((PyObject *)(&amp;((PyTypeObject*)PyExc_Exception)[0])));
    if (__pyx_t_12) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_array24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_4, &amp;__pyx_t_7, &amp;__pyx_t_6) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L5_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
      __pyx_v_e = __pyx_t_7;
      /*try:*/ {
/* … */
      /*finally:*/ {
        __pyx_L16_error:;
        /*exception exit:*/{
          __Pyx_PyThreadState_declare
          __Pyx_PyThreadState_assign
          __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0; __pyx_t_17 = 0; __pyx_t_18 = 0; __pyx_t_19 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
          if (PY_MAJOR_VERSION &gt;= 3) <span class='pyx_c_api'>__Pyx_ExceptionSwap</span>(&amp;__pyx_t_17, &amp;__pyx_t_18, &amp;__pyx_t_19);
          if ((PY_MAJOR_VERSION &lt; 3) || unlikely(<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_14, &amp;__pyx_t_15, &amp;__pyx_t_16) &lt; 0)) <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_t_14, &amp;__pyx_t_15, &amp;__pyx_t_16);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_14);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_15);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_16);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_17);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_18);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_19);
          __pyx_t_12 = __pyx_lineno; __pyx_t_11 = __pyx_clineno; __pyx_t_13 = __pyx_filename;
          {
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_e);
            __pyx_v_e = NULL;
          }
          if (PY_MAJOR_VERSION &gt;= 3) {
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_17);
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_18);
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_19);
            <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_17, __pyx_t_18, __pyx_t_19);
          }
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_15);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_16);
          <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_t_14, __pyx_t_15, __pyx_t_16);
          __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0; __pyx_t_17 = 0; __pyx_t_18 = 0; __pyx_t_19 = 0;
          __pyx_lineno = __pyx_t_12; __pyx_clineno = __pyx_t_11; __pyx_filename = __pyx_t_13;
          goto __pyx_L5_except_error;
        }
      }
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">085</span>:         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">Array shape not understood.&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-10 '>        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_ValueError, __pyx_tuple__2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 85, __pyx_L16_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_5, 0, 0, 0);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='error_goto'>__PYX_ERR(0, 85, __pyx_L16_error)</span>
      }
/* … */
  __pyx_tuple__2 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_u_Array_shape_not_understood);<span class='error_goto'> if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 85, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__2);
</pre><pre class="cython line score-0">&#xA0;<span class="">086</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">087</span>:     <span class="c"># kernel 5x5 separable</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">088</span>:     <span class="k">cdef</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">089</span>:         <span class="nb">float</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span> <span class="n">kernel</span> <span class="o">=</span> <span class="p">[&lt;</span><span class="kt">float</span><span class="p">&gt;(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">),</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;(</span><span class="mf">4.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">),</span></pre>
<pre class='cython code score-0 '>  __pyx_t_20[0] = ((float)(1.0 / 16.0));
  __pyx_t_20[1] = ((float)(4.0 / 16.0));
  __pyx_t_20[2] = ((float)(6.0 / 16.0));
  __pyx_t_20[3] = ((float)(4.0 / 16.0));
  __pyx_t_20[4] = ((float)(1.0 / 16.0));
  memcpy(&amp;(__pyx_v_kernel[0]), __pyx_t_20, sizeof(__pyx_v_kernel[0]) * (5));
</pre><pre class="cython line score-0">&#xA0;<span class="">090</span>:                            <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;(</span><span class="mf">6.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">),</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;(</span><span class="mf">4.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">),</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">)]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">091</span>:         <span class="n">short</span> <span class="nb">int</span> <span class="n">kernel_half</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">short</span> <span class="nb">int</span><span class="o">&gt;</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_v_kernel_half = ((short)2);
</pre><pre class="cython line score-42" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">092</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">convolve</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">uint8</span><span class="p">)</span></pre>
<pre class='cython code score-42 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_6, __pyx_n_s_numpy);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 2, __pyx_int_3);
  __pyx_t_6 = 0;
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5);
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_6, __pyx_n_s_uint8);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_5, __pyx_n_s_dtype, __pyx_t_6) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_4, __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_d_d_dc_unsigned_char</span>(__pyx_t_6, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_21.memview)) __PYX_ERR(0, 92, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_v_convolve = __pyx_t_21;
  __pyx_t_21.memview = NULL;
  __pyx_t_21.data = NULL;
</pre><pre class="cython line score-0">&#xA0;<span class="">093</span>:         <span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">094</span>:         <span class="nb">float</span> <span class="n">k</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">s</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">095</span>:         <span class="n">char</span> <span class="n">kernel_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">096</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">097</span>: </pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">098</span>:     <span class="k">with</span> <span class="k">nogil</span><span class="p">:</span></pre>
<pre class='cython code score-4 '>  {
      #ifdef WITH_THREAD
      PyThreadState *_save;
      Py_UNBLOCK_THREADS
      <span class='pyx_c_api'>__Pyx_FastGIL_Remember</span>();
      #endif
      /*try:*/ {
/* … */
      /*finally:*/ {
        /*normal exit:*/{
          #ifdef WITH_THREAD
          <span class='pyx_c_api'>__Pyx_FastGIL_Forget</span>();
          Py_BLOCK_THREADS
          #endif
          goto __pyx_L24;
        }
        __pyx_L24:;
      }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">099</span>:         <span class="c"># horizontal convolution</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">100</span>:         <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">SCHEDULE</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">THREAD_NUMBER</span><span class="p">):</span>  <span class="c"># range [0..h-1)</span></pre>
<pre class='cython code score-0 '>        __pyx_t_11 = __pyx_v_h;
        if ((1 == 0)) abort();
        {
            #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
                #undef likely
                #undef unlikely
                #define likely(x)   (x)
                #define unlikely(x) (x)
            #endif
            __pyx_t_23 = (__pyx_t_11 - 0 + 1 - 1/abs(1)) / 1;
            if (__pyx_t_23 &gt; 0)
            {
                #ifdef _OPENMP
                #pragma omp parallel
                #endif /* _OPENMP */
                {
                    #ifdef _OPENMP
                    #pragma omp for lastprivate(__pyx_v_b) lastprivate(__pyx_v_blue) lastprivate(__pyx_v_g) lastprivate(__pyx_v_green) lastprivate(__pyx_v_k) lastprivate(__pyx_v_kernel_offset) lastprivate(__pyx_v_r) lastprivate(__pyx_v_red) lastprivate(__pyx_v_x) lastprivate(__pyx_v_xx) firstprivate(__pyx_v_y) lastprivate(__pyx_v_y) schedule(static) num_threads(8)
                    #endif /* _OPENMP */
                    for (__pyx_t_22 = 0; __pyx_t_22 &lt; __pyx_t_23; __pyx_t_22++){
                        {
                            __pyx_v_y = (int)(0 + 1 * __pyx_t_22);
                            /* Initialize private variables to invalid values */
                            __pyx_v_b = ((float)__PYX_NAN());
                            __pyx_v_blue = ((unsigned char)'?');
                            __pyx_v_g = ((float)__PYX_NAN());
                            __pyx_v_green = ((unsigned char)'?');
                            __pyx_v_k = ((float)__PYX_NAN());
                            __pyx_v_kernel_offset = ((char)'?');
                            __pyx_v_r = ((float)__PYX_NAN());
                            __pyx_v_red = ((unsigned char)'?');
                            __pyx_v_x = ((int)0xbad0bad0);
                            __pyx_v_xx = ((int)0xbad0bad0);
</pre><pre class="cython line score-0">&#xA0;<span class="">101</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">102</span>:             <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>  <span class="c"># range [0..w-1]</span></pre>
<pre class='cython code score-0 '>                            __pyx_t_12 = __pyx_v_w;
                            __pyx_t_10 = __pyx_t_12;
                            for (__pyx_t_24 = 0; __pyx_t_24 &lt; __pyx_t_10; __pyx_t_24+=1) {
                              __pyx_v_x = __pyx_t_24;
</pre><pre class="cython line score-0">&#xA0;<span class="">103</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">104</span>:                 <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_25 = 0.0;
                              __pyx_t_26 = 0.0;
                              __pyx_t_27 = 0.0;
                              __pyx_v_r = __pyx_t_25;
                              __pyx_v_g = __pyx_t_26;
                              __pyx_v_b = __pyx_t_27;
</pre><pre class="cython line score-0">&#xA0;<span class="">105</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">106</span>:                 <span class="k">for</span> <span class="n">kernel_offset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_28 = (__pyx_v_kernel_half + 1);
                              __pyx_t_29 = __pyx_t_28;
                              for (__pyx_t_30 = (-__pyx_v_kernel_half); __pyx_t_30 &lt; __pyx_t_29; __pyx_t_30+=1) {
                                __pyx_v_kernel_offset = __pyx_t_30;
</pre><pre class="cython line score-0">&#xA0;<span class="">107</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">108</span>:                     <span class="n">k</span> <span class="o">=</span> <span class="n">kernel</span><span class="p">[</span><span class="n">kernel_offset</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_k = (__pyx_v_kernel[(__pyx_v_kernel_offset + __pyx_v_kernel_half)]);
</pre><pre class="cython line score-0">&#xA0;<span class="">109</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">110</span>:                     <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">kernel_offset</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_xx = (__pyx_v_x + __pyx_v_kernel_offset);
</pre><pre class="cython line score-0">&#xA0;<span class="">111</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">112</span>:                     <span class="c"># check boundaries.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">113</span>:                     <span class="c"># Fetch the edge pixel for the convolution</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">114</span>:                     <span class="k">if</span> <span class="n">xx</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_31 = ((__pyx_v_xx &lt; 0) != 0);
                                if (__pyx_t_31) {
/* … */
                                  goto __pyx_L33;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">115</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_32 = 0;
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_34 = 0;
                                  __pyx_t_35 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_32 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_34 * __pyx_v_rgb_array_.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">116</span>:                         <span class="n">rgb_array_</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_34 = 0;
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_32 = 1;
                                  __pyx_t_36 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_34 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_32 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_t_32 = 0;
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_34 = 2;
                                  __pyx_t_37 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_32 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_34 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_v_red = __pyx_t_35;
                                  __pyx_v_green = __pyx_t_36;
                                  __pyx_v_blue = __pyx_t_37;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">117</span>:                     <span class="k">elif</span> <span class="n">xx</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_31 = ((__pyx_v_xx &gt; (__pyx_v_w - 1)) != 0);
                                if (__pyx_t_31) {
/* … */
                                  goto __pyx_L33;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">118</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">w</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_34 = (__pyx_v_w - 1);
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_32 = 0;
                                  __pyx_t_37 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_34 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_32 * __pyx_v_rgb_array_.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">119</span>:                         <span class="n">rgb_array_</span><span class="p">[</span><span class="n">w</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">w</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_32 = (__pyx_v_w - 1);
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_34 = 1;
                                  __pyx_t_36 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_32 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_34 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_t_34 = (__pyx_v_w - 1);
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_32 = 2;
                                  __pyx_t_35 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_34 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_32 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_v_red = __pyx_t_37;
                                  __pyx_v_green = __pyx_t_36;
                                  __pyx_v_blue = __pyx_t_35;
</pre><pre class="cython line score-0">&#xA0;<span class="">120</span>:                     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">121</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                /*else*/ {
                                  __pyx_t_32 = __pyx_v_xx;
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_34 = 0;
                                  __pyx_t_35 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_32 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_34 * __pyx_v_rgb_array_.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">122</span>:                             <span class="n">rgb_array_</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_34 = __pyx_v_xx;
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_32 = 1;
                                  __pyx_t_36 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_34 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_32 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_t_32 = __pyx_v_xx;
                                  __pyx_t_33 = __pyx_v_y;
                                  __pyx_t_34 = 2;
                                  __pyx_t_37 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_32 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_34 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_v_red = __pyx_t_35;
                                  __pyx_v_green = __pyx_t_36;
                                  __pyx_v_blue = __pyx_t_37;
                                }
                                __pyx_L33:;
</pre><pre class="cython line score-0">&#xA0;<span class="">123</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">124</span>:                     <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">red</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_r = (__pyx_v_r + (__pyx_v_red * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">125</span>:                     <span class="n">g</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">green</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_g = (__pyx_v_g + (__pyx_v_green * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">126</span>:                     <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">blue</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_b = (__pyx_v_b + (__pyx_v_blue * __pyx_v_k));
                              }
</pre><pre class="cython line score-0">&#xA0;<span class="">127</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">128</span>:                 <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">r</span><span class="p">,</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_37 = ((unsigned char)__pyx_v_r);
/* … */
                              __pyx_t_34 = __pyx_v_x;
                              __pyx_t_33 = __pyx_v_y;
                              __pyx_t_32 = 0;
                              *((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_34 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_32)) )) = __pyx_t_37;
                              __pyx_t_32 = __pyx_v_x;
                              __pyx_t_33 = __pyx_v_y;
                              __pyx_t_34 = 1;
                              *((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_32 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_34)) )) = __pyx_t_36;
                              __pyx_t_34 = __pyx_v_x;
                              __pyx_t_33 = __pyx_v_y;
                              __pyx_t_32 = 2;
                              *((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_34 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_32)) )) = __pyx_t_35;
                            }
                        }
                    }
                }
            }
        }
        #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
            #undef likely
            #undef unlikely
            #define likely(x)   __builtin_expect(!!(x), 1)
            #define unlikely(x) __builtin_expect(!!(x), 0)
        #endif
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">129</span>:                     <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">g</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">b</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_36 = ((unsigned char)__pyx_v_g);
                              __pyx_t_35 = ((unsigned char)__pyx_v_b);
</pre><pre class="cython line score-0">&#xA0;<span class="">130</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">131</span>:         <span class="c"># Vertical convolution</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">132</span>:         <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span>  <span class="n">w</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">SCHEDULE</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">THREAD_NUMBER</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_11 = __pyx_v_w;
        if ((1 == 0)) abort();
        {
            #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
                #undef likely
                #undef unlikely
                #define likely(x)   (x)
                #define unlikely(x) (x)
            #endif
            __pyx_t_22 = (__pyx_t_11 - 0 + 1 - 1/abs(1)) / 1;
            if (__pyx_t_22 &gt; 0)
            {
                #ifdef _OPENMP
                #pragma omp parallel
                #endif /* _OPENMP */
                {
                    #ifdef _OPENMP
                    #pragma omp for lastprivate(__pyx_v_b) lastprivate(__pyx_v_blue) lastprivate(__pyx_v_g) lastprivate(__pyx_v_green) lastprivate(__pyx_v_k) lastprivate(__pyx_v_kernel_offset) lastprivate(__pyx_v_r) lastprivate(__pyx_v_red) firstprivate(__pyx_v_x) lastprivate(__pyx_v_x) lastprivate(__pyx_v_y) lastprivate(__pyx_v_yy) schedule(static) num_threads(8)
                    #endif /* _OPENMP */
                    for (__pyx_t_23 = 0; __pyx_t_23 &lt; __pyx_t_22; __pyx_t_23++){
                        {
                            __pyx_v_x = (int)(0 + 1 * __pyx_t_23);
                            /* Initialize private variables to invalid values */
                            __pyx_v_b = ((float)__PYX_NAN());
                            __pyx_v_blue = ((unsigned char)'?');
                            __pyx_v_g = ((float)__PYX_NAN());
                            __pyx_v_green = ((unsigned char)'?');
                            __pyx_v_k = ((float)__PYX_NAN());
                            __pyx_v_kernel_offset = ((char)'?');
                            __pyx_v_r = ((float)__PYX_NAN());
                            __pyx_v_red = ((unsigned char)'?');
                            __pyx_v_y = ((int)0xbad0bad0);
                            __pyx_v_yy = ((int)0xbad0bad0);
</pre><pre class="cython line score-0">&#xA0;<span class="">133</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">134</span>:             <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                            __pyx_t_12 = __pyx_v_h;
                            __pyx_t_10 = __pyx_t_12;
                            for (__pyx_t_24 = 0; __pyx_t_24 &lt; __pyx_t_10; __pyx_t_24+=1) {
                              __pyx_v_y = __pyx_t_24;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">135</span>:                 <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_27 = 0.0;
                              __pyx_t_26 = 0.0;
                              __pyx_t_25 = 0.0;
                              __pyx_v_r = __pyx_t_27;
                              __pyx_v_g = __pyx_t_26;
                              __pyx_v_b = __pyx_t_25;
</pre><pre class="cython line score-0">&#xA0;<span class="">136</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">137</span>:                 <span class="k">for</span> <span class="n">kernel_offset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_28 = (__pyx_v_kernel_half + 1);
                              __pyx_t_29 = __pyx_t_28;
                              for (__pyx_t_30 = (-__pyx_v_kernel_half); __pyx_t_30 &lt; __pyx_t_29; __pyx_t_30+=1) {
                                __pyx_v_kernel_offset = __pyx_t_30;
</pre><pre class="cython line score-0">&#xA0;<span class="">138</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">139</span>:                     <span class="n">k</span> <span class="o">=</span> <span class="n">kernel</span><span class="p">[</span><span class="n">kernel_offset</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_k = (__pyx_v_kernel[(__pyx_v_kernel_offset + __pyx_v_kernel_half)]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">140</span>:                     <span class="n">yy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">kernel_offset</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_yy = (__pyx_v_y + __pyx_v_kernel_offset);
</pre><pre class="cython line score-0">&#xA0;<span class="">141</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">142</span>:                     <span class="k">if</span> <span class="n">yy</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_31 = ((__pyx_v_yy &lt; 0) != 0);
                                if (__pyx_t_31) {
/* … */
                                  goto __pyx_L44;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">143</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_32 = __pyx_v_x;
                                  __pyx_t_33 = 0;
                                  __pyx_t_34 = 0;
                                  __pyx_t_35 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_32 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_34)) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">144</span>:                         <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_34 = __pyx_v_x;
                                  __pyx_t_33 = 0;
                                  __pyx_t_32 = 1;
                                  __pyx_t_36 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_34 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_32)) )));
                                  __pyx_t_32 = __pyx_v_x;
                                  __pyx_t_33 = 0;
                                  __pyx_t_34 = 2;
                                  __pyx_t_37 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_32 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_34)) )));
                                  __pyx_v_red = __pyx_t_35;
                                  __pyx_v_green = __pyx_t_36;
                                  __pyx_v_blue = __pyx_t_37;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">145</span>:                     <span class="k">elif</span> <span class="n">yy</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span><span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_31 = ((__pyx_v_yy &gt; (__pyx_v_h - 1)) != 0);
                                if (__pyx_t_31) {
/* … */
                                  goto __pyx_L44;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">146</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_34 = __pyx_v_x;
                                  __pyx_t_33 = (__pyx_v_h - 1);
                                  __pyx_t_32 = 0;
                                  __pyx_t_37 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_34 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_32)) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">147</span>:                         <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_32 = __pyx_v_x;
                                  __pyx_t_33 = (__pyx_v_h - 1);
                                  __pyx_t_34 = 1;
                                  __pyx_t_36 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_32 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_34)) )));
                                  __pyx_t_34 = __pyx_v_x;
                                  __pyx_t_33 = (__pyx_v_h - 1);
                                  __pyx_t_32 = 2;
                                  __pyx_t_35 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_34 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_32)) )));
                                  __pyx_v_red = __pyx_t_37;
                                  __pyx_v_green = __pyx_t_36;
                                  __pyx_v_blue = __pyx_t_35;
</pre><pre class="cython line score-0">&#xA0;<span class="">148</span>:                     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">149</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                /*else*/ {
                                  __pyx_t_32 = __pyx_v_x;
                                  __pyx_t_33 = __pyx_v_yy;
                                  __pyx_t_34 = 0;
                                  __pyx_t_35 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_32 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_34)) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">150</span>:                             <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_34 = __pyx_v_x;
                                  __pyx_t_33 = __pyx_v_yy;
                                  __pyx_t_32 = 1;
                                  __pyx_t_36 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_34 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_32)) )));
                                  __pyx_t_32 = __pyx_v_x;
                                  __pyx_t_33 = __pyx_v_yy;
                                  __pyx_t_34 = 2;
                                  __pyx_t_37 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_32 * __pyx_v_convolve.strides[0]) ) + __pyx_t_33 * __pyx_v_convolve.strides[1]) )) + __pyx_t_34)) )));
                                  __pyx_v_red = __pyx_t_35;
                                  __pyx_v_green = __pyx_t_36;
                                  __pyx_v_blue = __pyx_t_37;
                                }
                                __pyx_L44:;
</pre><pre class="cython line score-0">&#xA0;<span class="">151</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">152</span>:                     <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">red</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_r = (__pyx_v_r + (__pyx_v_red * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">153</span>:                     <span class="n">g</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">green</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_g = (__pyx_v_g + (__pyx_v_green * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">154</span>:                     <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">blue</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_b = (__pyx_v_b + (__pyx_v_blue * __pyx_v_k));
                              }
</pre><pre class="cython line score-0">&#xA0;<span class="">155</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">156</span>:                 <span class="n">rgb_array_</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="w">\</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_34 = __pyx_v_x;
                              __pyx_t_33 = __pyx_v_y;
                              __pyx_t_32 = 0;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_34 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_32 * __pyx_v_rgb_array_.strides[2]) )) = __pyx_t_37;
                              __pyx_t_32 = __pyx_v_x;
                              __pyx_t_33 = __pyx_v_y;
                              __pyx_t_34 = 1;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_32 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_34 * __pyx_v_rgb_array_.strides[2]) )) = __pyx_t_36;
                              __pyx_t_34 = __pyx_v_x;
                              __pyx_t_33 = __pyx_v_y;
                              __pyx_t_32 = 2;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_34 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_33 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_32 * __pyx_v_rgb_array_.strides[2]) )) = __pyx_t_35;
                            }
                        }
                    }
                }
            }
        }
        #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
            #undef likely
            #undef unlikely
            #define likely(x)   __builtin_expect(!!(x), 1)
            #define unlikely(x) __builtin_expect(!!(x), 0)
        #endif
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">157</span>:                     <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">r</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">g</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">b</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_37 = ((unsigned char)__pyx_v_r);
                              __pyx_t_36 = ((unsigned char)__pyx_v_g);
                              __pyx_t_35 = ((unsigned char)__pyx_v_b);
</pre><pre class="cython line score-0">&#xA0;<span class="">158</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">159</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">160</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">161</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">162</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">nonecheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">163</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">cdivision</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">164</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">165</span>: <span class="k">cdef</span> <span class="nf">blur5x5_surface24_inplace_c</span><span class="p">(</span><span class="n">surface_</span><span class="p">):</span></pre>
<pre class='cython code score-10 '>static PyObject *__pyx_f_12PygameShader_15gaussianBlur5x5_blur5x5_surface24_inplace_c(PyObject *__pyx_v_surface_) {
  __Pyx_memviewslice __pyx_v_rgb_array_ = { 0, 0, { 0 }, { 0 }, { 0 } };
  int __pyx_v_w;
  int __pyx_v_h;
  CYTHON_UNUSED int __pyx_v_dim;
  CYTHON_UNUSED PyObject *__pyx_v_e = NULL;
  float __pyx_v_kernel[5];
  short __pyx_v_kernel_half;
  __Pyx_memviewslice __pyx_v_convolve = { 0, 0, { 0 }, { 0 }, { 0 } };
  CYTHON_UNUSED __Pyx_memviewslice __pyx_v_convolved = { 0, 0, { 0 }, { 0 }, { 0 } };
  CYTHON_UNUSED short __pyx_v_kernel_length;
  int __pyx_v_x;
  int __pyx_v_y;
  int __pyx_v_xx;
  int __pyx_v_yy;
  float __pyx_v_k;
  float __pyx_v_r;
  float __pyx_v_g;
  float __pyx_v_b;
  char __pyx_v_kernel_offset;
  unsigned char __pyx_v_red;
  unsigned char __pyx_v_green;
  unsigned char __pyx_v_blue;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("blur5x5_surface24_inplace_c", 0);
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_7, 1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_23, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_surface24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_rgb_array_, 1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_e);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_convolve, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_convolved, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">166</span>: <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">167</span>: <span class="sd">    # Gaussian kernel 5x5</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">168</span>: <span class="sd">        # |1   4   6   4  1|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">169</span>: <span class="sd">        # |4  16  24  16  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">170</span>: <span class="sd">        # |6  24  36  24  6|  x 1/256</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">171</span>: <span class="sd">        # |4  16  24  16  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">172</span>: <span class="sd">        # |1  4    6   4  1|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">173</span>: <span class="sd">    This method is using convolution property and process the image in two passes,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">174</span>: <span class="sd">    first the horizontal convolution and last the vertical convolution</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">175</span>: <span class="sd">    pixels convoluted outside image edges will be set to adjacent edge value</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">176</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">177</span>: <span class="sd">    :param surface_: numpy.ndarray type (w, h, 3) uint8 </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">178</span>: <span class="sd">    :return: Return 24-bit a numpy.ndarray type (w, h, 3) uint8</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">179</span>: <span class="sd">    &quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">180</span>:     <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">char</span> [<span class="p">:,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="n">rgb_array_</span></pre>
<pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">181</span>:     <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-8 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_7, 1);
/* … */
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    goto __pyx_L1_error;
    __pyx_L8_try_end:;
  }
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">182</span>:         <span class="n">rgb_array_</span> <span class="o">=</span> <span class="n">pixels3d</span><span class="p">(</span><span class="n">surface_</span><span class="p">)</span></pre>
<pre class='cython code score-19 '>      <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_5, __pyx_n_s_pixels3d);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 182, __pyx_L3_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
        __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
        }
      }
      __pyx_t_4 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_6, __pyx_v_surface_) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_5, __pyx_v_surface_);
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_4)) <span class='error_goto'>__PYX_ERR(0, 182, __pyx_L3_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsdsds_unsigned_char</span>(__pyx_t_4, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_7.memview)) __PYX_ERR(0, 182, __pyx_L3_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_rgb_array_ = __pyx_t_7;
      __pyx_t_7.memview = NULL;
      __pyx_t_7.data = NULL;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">183</span>:     <span class="k">except</span><span class="p">:</span></pre>
<pre class='cython code score-4 '>    /*except:*/ {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_surface24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_4, &amp;__pyx_t_5, &amp;__pyx_t_6) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 183, __pyx_L5_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">184</span>:         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span></pre>
<pre class='cython code score-6 '>      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_builtin_ValueError, __pyx_t_9);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 184, __pyx_L5_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_8, 0, 0, 0);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      <span class='error_goto'>__PYX_ERR(0, 184, __pyx_L5_except_error)</span>
    }
    __pyx_L5_except_error:;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">185</span>:             <span class="s">&#39;Invalid pygame surface, compatible with 24bit only got </span><span class="si">%s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="n">surface_</span><span class="o">.</span><span class="n">get_bitsize</span><span class="p">())</span></pre>
<pre class='cython code score-21 '>      __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_surface_, __pyx_n_s_get_bitsize);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 185, __pyx_L5_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      __pyx_t_10 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_9))) {
        __pyx_t_10 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_9);
        if (likely(__pyx_t_10)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_9);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_10);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_9, function);
        }
      }
      __pyx_t_8 = (__pyx_t_10) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_9, __pyx_t_10) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
      if (unlikely(!__pyx_t_8)) <span class='error_goto'>__PYX_ERR(0, 185, __pyx_L5_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyUnicode_FormatSafe</span>(__pyx_kp_u_Invalid_pygame_surface_compatibl, __pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 185, __pyx_L5_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">186</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">187</span>:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">w</span><span class="p">,</span> <span class="nf">h</span><span class="p">,</span> <span class="nf">dim</span></pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">188</span>:     <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    goto __pyx_L16_try_end;
    __pyx_L11_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_7, 1);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
/* … */
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_1);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_3, __pyx_t_2, __pyx_t_1);
    goto __pyx_L1_error;
    __pyx_L16_try_end:;
  }
</pre><pre class="cython line score-78" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">189</span>:         <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">dim</span> <span class="o">=</span> <span class="p">(&lt;</span><span class="kt">object</span><span class="p">&gt;</span><span class="n">rgb_array_</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-78 '>      __pyx_t_6 = __pyx_memoryview_fromslice(__pyx_v_rgb_array_, 3, (PyObject *(*)(char *)) __pyx_memview_get_unsigned_char, (int (*)(char *, PyObject *)) __pyx_memview_set_unsigned_char, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_shape);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetSlice</span>(__pyx_t_5, 0, 3, NULL, NULL, &amp;__pyx_slice_, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_6))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        PyObject* sequence = __pyx_t_6;
        Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
        if (unlikely(size != 3)) {
          if (size &gt; 3) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(3);
          else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
          <span class='error_goto'>__PYX_ERR(0, 189, __pyx_L11_error)</span>
        }
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
          __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
          __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
          __pyx_t_8 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
        } else {
          __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
          __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
          __pyx_t_8 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
        }
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        __pyx_t_8 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 2);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        #endif
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      } else {
        Py_ssize_t index = -1;
        __pyx_t_9 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 189, __pyx_L11_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
        __pyx_t_11 = Py_TYPE(__pyx_t_9)-&gt;tp_iternext;
        index = 0; __pyx_t_5 = __pyx_t_11(__pyx_t_9); if (unlikely(!__pyx_t_5)) goto __pyx_L17_unpacking_failed;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        index = 1; __pyx_t_4 = __pyx_t_11(__pyx_t_9); if (unlikely(!__pyx_t_4)) goto __pyx_L17_unpacking_failed;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        index = 2; __pyx_t_8 = __pyx_t_11(__pyx_t_9); if (unlikely(!__pyx_t_8)) goto __pyx_L17_unpacking_failed;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_11(__pyx_t_9), 3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 189, __pyx_L11_error)</span>
        __pyx_t_11 = NULL;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
        goto __pyx_L18_unpacking_done;
        __pyx_L17_unpacking_failed:;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_11 = NULL;
        if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
        <span class='error_goto'>__PYX_ERR(0, 189, __pyx_L11_error)</span>
        __pyx_L18_unpacking_done:;
      }
      __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_5); if (unlikely((__pyx_t_12 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 189, __pyx_L11_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_13 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_4); if (unlikely((__pyx_t_13 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 189, __pyx_L11_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_8); if (unlikely((__pyx_t_14 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 189, __pyx_L11_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_v_w = __pyx_t_12;
      __pyx_v_h = __pyx_t_13;
      __pyx_v_dim = __pyx_t_14;
</pre><pre class="cython line score-0">&#xA0;<span class="">190</span>: </pre>
<pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">191</span>:     <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></pre>
<pre class='cython code score-21 '>    __pyx_t_14 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(((PyObject *)(&amp;((PyTypeObject*)PyExc_Exception)[0])));
    if (__pyx_t_14) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.blur5x5_surface24_inplace_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_6, &amp;__pyx_t_8, &amp;__pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 191, __pyx_L13_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      __pyx_v_e = __pyx_t_8;
      /*try:*/ {
/* … */
      /*finally:*/ {
        __pyx_L24_error:;
        /*exception exit:*/{
          __Pyx_PyThreadState_declare
          __Pyx_PyThreadState_assign
          __pyx_t_16 = 0; __pyx_t_17 = 0; __pyx_t_18 = 0; __pyx_t_19 = 0; __pyx_t_20 = 0; __pyx_t_21 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          __PYX_XDEC_MEMVIEW(&amp;__pyx_t_7, 1);
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
          if (PY_MAJOR_VERSION &gt;= 3) <span class='pyx_c_api'>__Pyx_ExceptionSwap</span>(&amp;__pyx_t_19, &amp;__pyx_t_20, &amp;__pyx_t_21);
          if ((PY_MAJOR_VERSION &lt; 3) || unlikely(<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_16, &amp;__pyx_t_17, &amp;__pyx_t_18) &lt; 0)) <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_t_16, &amp;__pyx_t_17, &amp;__pyx_t_18);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_16);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_17);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_18);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_19);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_20);
          <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_21);
          __pyx_t_14 = __pyx_lineno; __pyx_t_13 = __pyx_clineno; __pyx_t_15 = __pyx_filename;
          {
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_e);
            __pyx_v_e = NULL;
          }
          if (PY_MAJOR_VERSION &gt;= 3) {
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_19);
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_20);
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_21);
            <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_19, __pyx_t_20, __pyx_t_21);
          }
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_16);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_17);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_18);
          <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_t_16, __pyx_t_17, __pyx_t_18);
          __pyx_t_16 = 0; __pyx_t_17 = 0; __pyx_t_18 = 0; __pyx_t_19 = 0; __pyx_t_20 = 0; __pyx_t_21 = 0;
          __pyx_lineno = __pyx_t_14; __pyx_clineno = __pyx_t_13; __pyx_filename = __pyx_t_15;
          goto __pyx_L13_except_error;
        }
      }
    }
    goto __pyx_L13_except_error;
    __pyx_L13_except_error:;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">192</span>:         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">Array shape not understood.&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-5 '>        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_ValueError, __pyx_tuple__2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 192, __pyx_L24_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_5, 0, 0, 0);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='error_goto'>__PYX_ERR(0, 192, __pyx_L24_error)</span>
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">193</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">194</span>:     <span class="c"># kernel 5x5 separable</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">195</span>:     <span class="k">cdef</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">196</span>:         <span class="nb">float</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span> <span class="n">kernel</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">16.0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_22[0] = (1.0 / 16.0);
  __pyx_t_22[1] = (4.0 / 16.0);
  __pyx_t_22[2] = (6.0 / 16.0);
  __pyx_t_22[3] = (4.0 / 16.0);
  __pyx_t_22[4] = (1.0 / 16.0);
  memcpy(&amp;(__pyx_v_kernel[0]), __pyx_t_22, sizeof(__pyx_v_kernel[0]) * (5));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">197</span>:         <span class="n">short</span> <span class="nb">int</span> <span class="n">kernel_half</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">short</span> <span class="nb">int</span><span class="o">&gt;</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_v_kernel_half = ((short)2);
</pre><pre class="cython line score-42" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">198</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">convolve</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">uint8</span><span class="p">)</span></pre>
<pre class='cython code score-42 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_numpy);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 2, __pyx_int_3);
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_5);
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_uint8);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_5, __pyx_n_s_dtype, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_6, __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_23 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_d_d_dc_unsigned_char</span>(__pyx_t_4, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_23.memview)) __PYX_ERR(0, 198, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_convolve = __pyx_t_23;
  __pyx_t_23.memview = NULL;
  __pyx_t_23.data = NULL;
</pre><pre class="cython line score-42" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">199</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">convolved</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">uint8</span><span class="p">)</span></pre>
<pre class='cython code score-42 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_numpy);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1, __pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 2, __pyx_int_3);
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_8);
  __pyx_t_8 = 0;
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_uint8);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_8, __pyx_n_s_dtype, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_6, __pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_23 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_d_d_dc_unsigned_char</span>(__pyx_t_4, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_23.memview)) __PYX_ERR(0, 199, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_convolved = __pyx_t_23;
  __pyx_t_23.memview = NULL;
  __pyx_t_23.data = NULL;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">200</span>:         <span class="n">short</span> <span class="nb">int</span> <span class="n">kernel_length</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">short</span> <span class="nb">int</span><span class="o">&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span></pre>
<pre class='cython code score-6 '>  __pyx_t_4 = __Pyx_carray_to_py_float(__pyx_v_kernel, 5);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 200, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_24 = <span class='py_c_api'>PyObject_Length</span>(__pyx_t_4);<span class='error_goto'> if (unlikely(__pyx_t_24 == ((Py_ssize_t)-1))) __PYX_ERR(0, 200, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_kernel_length = ((short)__pyx_t_24);
</pre><pre class="cython line score-0">&#xA0;<span class="">201</span>:         <span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">202</span>:         <span class="nb">float</span> <span class="n">k</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">s</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">203</span>:         <span class="n">char</span> <span class="n">kernel_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">204</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">205</span>: </pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">206</span>:     <span class="k">with</span> <span class="k">nogil</span><span class="p">:</span></pre>
<pre class='cython code score-4 '>  {
      #ifdef WITH_THREAD
      PyThreadState *_save;
      Py_UNBLOCK_THREADS
      <span class='pyx_c_api'>__Pyx_FastGIL_Remember</span>();
      #endif
      /*try:*/ {
/* … */
      /*finally:*/ {
        /*normal exit:*/{
          #ifdef WITH_THREAD
          <span class='pyx_c_api'>__Pyx_FastGIL_Forget</span>();
          Py_BLOCK_THREADS
          #endif
          goto __pyx_L32;
        }
        __pyx_L32:;
      }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">207</span>:         <span class="c"># horizontal convolution</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">208</span>:         <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">SCHEDULE</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">THREAD_NUMBER</span><span class="p">):</span>  <span class="c"># range [0..h-1)</span></pre>
<pre class='cython code score-0 '>        __pyx_t_13 = __pyx_v_h;
        if ((1 == 0)) abort();
        {
            #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
                #undef likely
                #undef unlikely
                #define likely(x)   (x)
                #define unlikely(x) (x)
            #endif
            __pyx_t_26 = (__pyx_t_13 - 0 + 1 - 1/abs(1)) / 1;
            if (__pyx_t_26 &gt; 0)
            {
                #ifdef _OPENMP
                #pragma omp parallel
                #endif /* _OPENMP */
                {
                    #ifdef _OPENMP
                    #pragma omp for lastprivate(__pyx_v_b) lastprivate(__pyx_v_blue) lastprivate(__pyx_v_g) lastprivate(__pyx_v_green) lastprivate(__pyx_v_k) lastprivate(__pyx_v_kernel_offset) lastprivate(__pyx_v_r) lastprivate(__pyx_v_red) lastprivate(__pyx_v_x) lastprivate(__pyx_v_xx) firstprivate(__pyx_v_y) lastprivate(__pyx_v_y) schedule(static) num_threads(8)
                    #endif /* _OPENMP */
                    for (__pyx_t_25 = 0; __pyx_t_25 &lt; __pyx_t_26; __pyx_t_25++){
                        {
                            __pyx_v_y = (int)(0 + 1 * __pyx_t_25);
                            /* Initialize private variables to invalid values */
                            __pyx_v_b = ((float)__PYX_NAN());
                            __pyx_v_blue = ((unsigned char)'?');
                            __pyx_v_g = ((float)__PYX_NAN());
                            __pyx_v_green = ((unsigned char)'?');
                            __pyx_v_k = ((float)__PYX_NAN());
                            __pyx_v_kernel_offset = ((char)'?');
                            __pyx_v_r = ((float)__PYX_NAN());
                            __pyx_v_red = ((unsigned char)'?');
                            __pyx_v_x = ((int)0xbad0bad0);
                            __pyx_v_xx = ((int)0xbad0bad0);
</pre><pre class="cython line score-0">&#xA0;<span class="">209</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">210</span>:             <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>  <span class="c"># range [0..w-1]</span></pre>
<pre class='cython code score-0 '>                            __pyx_t_14 = __pyx_v_w;
                            __pyx_t_12 = __pyx_t_14;
                            for (__pyx_t_27 = 0; __pyx_t_27 &lt; __pyx_t_12; __pyx_t_27+=1) {
                              __pyx_v_x = __pyx_t_27;
</pre><pre class="cython line score-0">&#xA0;<span class="">211</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">212</span>:                 <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_28 = 0.0;
                              __pyx_t_29 = 0.0;
                              __pyx_t_30 = 0.0;
                              __pyx_v_r = __pyx_t_28;
                              __pyx_v_g = __pyx_t_29;
                              __pyx_v_b = __pyx_t_30;
</pre><pre class="cython line score-0">&#xA0;<span class="">213</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">214</span>:                 <span class="k">for</span> <span class="n">kernel_offset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_31 = (__pyx_v_kernel_half + 1);
                              __pyx_t_32 = __pyx_t_31;
                              for (__pyx_t_33 = (-__pyx_v_kernel_half); __pyx_t_33 &lt; __pyx_t_32; __pyx_t_33+=1) {
                                __pyx_v_kernel_offset = __pyx_t_33;
</pre><pre class="cython line score-0">&#xA0;<span class="">215</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">216</span>:                     <span class="n">k</span> <span class="o">=</span> <span class="n">kernel</span><span class="p">[</span><span class="n">kernel_offset</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_k = (__pyx_v_kernel[(__pyx_v_kernel_offset + __pyx_v_kernel_half)]);
</pre><pre class="cython line score-0">&#xA0;<span class="">217</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">218</span>:                     <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">kernel_offset</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_xx = (__pyx_v_x + __pyx_v_kernel_offset);
</pre><pre class="cython line score-0">&#xA0;<span class="">219</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">220</span>:                     <span class="c"># check boundaries.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">221</span>:                     <span class="c"># Fetch the edge pixel for the convolution</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">222</span>:                     <span class="k">if</span> <span class="n">xx</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_34 = ((__pyx_v_xx &lt; 0) != 0);
                                if (__pyx_t_34) {
/* … */
                                  goto __pyx_L41;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">223</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = 0;
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_37 = 0;
                                  __pyx_t_38 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_35 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array_.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">224</span>:                         <span class="n">rgb_array_</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = 0;
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_35 = 1;
                                  __pyx_t_39 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_37 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_t_35 = 0;
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_37 = 2;
                                  __pyx_t_40 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_35 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_v_red = __pyx_t_38;
                                  __pyx_v_green = __pyx_t_39;
                                  __pyx_v_blue = __pyx_t_40;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">225</span>:                     <span class="k">elif</span> <span class="n">xx</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_34 = ((__pyx_v_xx &gt; (__pyx_v_w - 1)) != 0);
                                if (__pyx_t_34) {
/* … */
                                  goto __pyx_L41;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">226</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">w</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = (__pyx_v_w - 1);
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_35 = 0;
                                  __pyx_t_40 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_37 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array_.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">227</span>:                         <span class="n">rgb_array_</span><span class="p">[</span><span class="n">w</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">w</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = (__pyx_v_w - 1);
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_37 = 1;
                                  __pyx_t_39 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_35 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_t_37 = (__pyx_v_w - 1);
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_35 = 2;
                                  __pyx_t_38 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_37 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_v_red = __pyx_t_40;
                                  __pyx_v_green = __pyx_t_39;
                                  __pyx_v_blue = __pyx_t_38;
</pre><pre class="cython line score-0">&#xA0;<span class="">228</span>:                     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">229</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                /*else*/ {
                                  __pyx_t_35 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_37 = 0;
                                  __pyx_t_38 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_35 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array_.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">230</span>:                             <span class="n">rgb_array_</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_35 = 1;
                                  __pyx_t_39 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_37 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_t_35 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_y;
                                  __pyx_t_37 = 2;
                                  __pyx_t_40 = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_35 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array_.strides[2]) )));
                                  __pyx_v_red = __pyx_t_38;
                                  __pyx_v_green = __pyx_t_39;
                                  __pyx_v_blue = __pyx_t_40;
                                }
                                __pyx_L41:;
</pre><pre class="cython line score-0">&#xA0;<span class="">231</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">232</span>:                     <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">red</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_r = (__pyx_v_r + (__pyx_v_red * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">233</span>:                     <span class="n">g</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">green</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_g = (__pyx_v_g + (__pyx_v_green * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">234</span>:                     <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">blue</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_b = (__pyx_v_b + (__pyx_v_blue * __pyx_v_k));
                              }
</pre><pre class="cython line score-0">&#xA0;<span class="">235</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">236</span>:                 <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">r</span><span class="p">,</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_40 = ((unsigned char)__pyx_v_r);
/* … */
                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_35 = 0;
                              *((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_37 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_35)) )) = __pyx_t_40;
                              __pyx_t_35 = __pyx_v_x;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_37 = 1;
                              *((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_35 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_37)) )) = __pyx_t_39;
                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_35 = 2;
                              *((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_37 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_35)) )) = __pyx_t_38;
                            }
                        }
                    }
                }
            }
        }
        #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
            #undef likely
            #undef unlikely
            #define likely(x)   __builtin_expect(!!(x), 1)
            #define unlikely(x) __builtin_expect(!!(x), 0)
        #endif
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">237</span>:                     <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">g</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">b</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_39 = ((unsigned char)__pyx_v_g);
                              __pyx_t_38 = ((unsigned char)__pyx_v_b);
</pre><pre class="cython line score-0">&#xA0;<span class="">238</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">239</span>:         <span class="c"># Vertical convolution</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">240</span>:         <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span>  <span class="n">w</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">SCHEDULE</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">THREAD_NUMBER</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_13 = __pyx_v_w;
        if ((1 == 0)) abort();
        {
            #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
                #undef likely
                #undef unlikely
                #define likely(x)   (x)
                #define unlikely(x) (x)
            #endif
            __pyx_t_25 = (__pyx_t_13 - 0 + 1 - 1/abs(1)) / 1;
            if (__pyx_t_25 &gt; 0)
            {
                #ifdef _OPENMP
                #pragma omp parallel
                #endif /* _OPENMP */
                {
                    #ifdef _OPENMP
                    #pragma omp for lastprivate(__pyx_v_b) lastprivate(__pyx_v_blue) lastprivate(__pyx_v_g) lastprivate(__pyx_v_green) lastprivate(__pyx_v_k) lastprivate(__pyx_v_kernel_offset) lastprivate(__pyx_v_r) lastprivate(__pyx_v_red) firstprivate(__pyx_v_x) lastprivate(__pyx_v_x) lastprivate(__pyx_v_y) lastprivate(__pyx_v_yy) schedule(static) num_threads(8)
                    #endif /* _OPENMP */
                    for (__pyx_t_26 = 0; __pyx_t_26 &lt; __pyx_t_25; __pyx_t_26++){
                        {
                            __pyx_v_x = (int)(0 + 1 * __pyx_t_26);
                            /* Initialize private variables to invalid values */
                            __pyx_v_b = ((float)__PYX_NAN());
                            __pyx_v_blue = ((unsigned char)'?');
                            __pyx_v_g = ((float)__PYX_NAN());
                            __pyx_v_green = ((unsigned char)'?');
                            __pyx_v_k = ((float)__PYX_NAN());
                            __pyx_v_kernel_offset = ((char)'?');
                            __pyx_v_r = ((float)__PYX_NAN());
                            __pyx_v_red = ((unsigned char)'?');
                            __pyx_v_y = ((int)0xbad0bad0);
                            __pyx_v_yy = ((int)0xbad0bad0);
</pre><pre class="cython line score-0">&#xA0;<span class="">241</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">242</span>:             <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                            __pyx_t_14 = __pyx_v_h;
                            __pyx_t_12 = __pyx_t_14;
                            for (__pyx_t_27 = 0; __pyx_t_27 &lt; __pyx_t_12; __pyx_t_27+=1) {
                              __pyx_v_y = __pyx_t_27;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">243</span>:                 <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_30 = 0.0;
                              __pyx_t_29 = 0.0;
                              __pyx_t_28 = 0.0;
                              __pyx_v_r = __pyx_t_30;
                              __pyx_v_g = __pyx_t_29;
                              __pyx_v_b = __pyx_t_28;
</pre><pre class="cython line score-0">&#xA0;<span class="">244</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">245</span>:                 <span class="k">for</span> <span class="n">kernel_offset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_31 = (__pyx_v_kernel_half + 1);
                              __pyx_t_32 = __pyx_t_31;
                              for (__pyx_t_33 = (-__pyx_v_kernel_half); __pyx_t_33 &lt; __pyx_t_32; __pyx_t_33+=1) {
                                __pyx_v_kernel_offset = __pyx_t_33;
</pre><pre class="cython line score-0">&#xA0;<span class="">246</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">247</span>:                     <span class="n">k</span> <span class="o">=</span> <span class="n">kernel</span><span class="p">[</span><span class="n">kernel_offset</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_k = (__pyx_v_kernel[(__pyx_v_kernel_offset + __pyx_v_kernel_half)]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">248</span>:                     <span class="n">yy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">kernel_offset</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_yy = (__pyx_v_y + __pyx_v_kernel_offset);
</pre><pre class="cython line score-0">&#xA0;<span class="">249</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">250</span>:                     <span class="k">if</span> <span class="n">yy</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_34 = ((__pyx_v_yy &lt; 0) != 0);
                                if (__pyx_t_34) {
/* … */
                                  goto __pyx_L52;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">251</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = __pyx_v_x;
                                  __pyx_t_36 = 0;
                                  __pyx_t_37 = 0;
                                  __pyx_t_38 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_35 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_37)) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">252</span>:                         <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = __pyx_v_x;
                                  __pyx_t_36 = 0;
                                  __pyx_t_35 = 1;
                                  __pyx_t_39 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_37 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_35)) )));
                                  __pyx_t_35 = __pyx_v_x;
                                  __pyx_t_36 = 0;
                                  __pyx_t_37 = 2;
                                  __pyx_t_40 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_35 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_37)) )));
                                  __pyx_v_red = __pyx_t_38;
                                  __pyx_v_green = __pyx_t_39;
                                  __pyx_v_blue = __pyx_t_40;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">253</span>:                     <span class="k">elif</span> <span class="n">yy</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span><span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_34 = ((__pyx_v_yy &gt; (__pyx_v_h - 1)) != 0);
                                if (__pyx_t_34) {
/* … */
                                  goto __pyx_L52;
                                }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">254</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = __pyx_v_x;
                                  __pyx_t_36 = (__pyx_v_h - 1);
                                  __pyx_t_35 = 0;
                                  __pyx_t_40 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_37 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_35)) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">255</span>:                         <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = __pyx_v_x;
                                  __pyx_t_36 = (__pyx_v_h - 1);
                                  __pyx_t_37 = 1;
                                  __pyx_t_39 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_35 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_37)) )));
                                  __pyx_t_37 = __pyx_v_x;
                                  __pyx_t_36 = (__pyx_v_h - 1);
                                  __pyx_t_35 = 2;
                                  __pyx_t_38 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_37 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_35)) )));
                                  __pyx_v_red = __pyx_t_40;
                                  __pyx_v_green = __pyx_t_39;
                                  __pyx_v_blue = __pyx_t_38;
</pre><pre class="cython line score-0">&#xA0;<span class="">256</span>:                     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">257</span>:                         <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span><span class="w">\</span></pre>
<pre class='cython code score-0 '>                                /*else*/ {
                                  __pyx_t_35 = __pyx_v_x;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_37 = 0;
                                  __pyx_t_38 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_35 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_37)) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">258</span>:                             <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">convolve</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = __pyx_v_x;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_35 = 1;
                                  __pyx_t_39 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_37 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_35)) )));
                                  __pyx_t_35 = __pyx_v_x;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_37 = 2;
                                  __pyx_t_40 = (*((unsigned char *) ( /* dim=2 */ ((char *) (((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_convolve.data + __pyx_t_35 * __pyx_v_convolve.strides[0]) ) + __pyx_t_36 * __pyx_v_convolve.strides[1]) )) + __pyx_t_37)) )));
                                  __pyx_v_red = __pyx_t_38;
                                  __pyx_v_green = __pyx_t_39;
                                  __pyx_v_blue = __pyx_t_40;
                                }
                                __pyx_L52:;
</pre><pre class="cython line score-0">&#xA0;<span class="">259</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">260</span>:                     <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">red</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_r = (__pyx_v_r + (__pyx_v_red * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">261</span>:                     <span class="n">g</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">green</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_g = (__pyx_v_g + (__pyx_v_green * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">262</span>:                     <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">blue</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_b = (__pyx_v_b + (__pyx_v_blue * __pyx_v_k));
                              }
</pre><pre class="cython line score-0">&#xA0;<span class="">263</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">264</span>:                 <span class="n">rgb_array_</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span> <span class="n">rgb_array_</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="w">\</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_35 = 0;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_37 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array_.strides[2]) )) = __pyx_t_40;
                              __pyx_t_35 = __pyx_v_x;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_37 = 1;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_35 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array_.strides[2]) )) = __pyx_t_39;
                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_35 = 2;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array_.data + __pyx_t_37 * __pyx_v_rgb_array_.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array_.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array_.strides[2]) )) = __pyx_t_38;
                            }
                        }
                    }
                }
            }
        }
        #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
            #undef likely
            #undef unlikely
            #define likely(x)   __builtin_expect(!!(x), 1)
            #define unlikely(x) __builtin_expect(!!(x), 0)
        #endif
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">265</span>:                     <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">r</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">g</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">b</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_40 = ((unsigned char)__pyx_v_r);
                              __pyx_t_39 = ((unsigned char)__pyx_v_g);
                              __pyx_t_38 = ((unsigned char)__pyx_v_b);
</pre><pre class="cython line score-0">&#xA0;<span class="">266</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">267</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">268</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">269</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">nonecheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">270</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">cdivision</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">271</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">272</span>: <span class="k">cpdef</span> <span class="nf">canny_blur5x5_surface24_c</span><span class="p">(</span><span class="n">surface_</span><span class="p">):</span></pre>
<pre class='cython code score-16 '>static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_3canny_blur5x5_surface24_c(PyObject *__pyx_self, PyObject *__pyx_v_surface_); /*proto*/
static PyObject *__pyx_f_12PygameShader_15gaussianBlur5x5_canny_blur5x5_surface24_c(PyObject *__pyx_v_surface_, CYTHON_UNUSED int __pyx_skip_dispatch) {
  PyObject *__pyx_v_kernel = NULL;
  int __pyx_v_w;
  int __pyx_v_h;
  PyObject *__pyx_v_rgb_array_ = NULL;
  CYTHON_UNUSED float __pyx_v_kernel_weight;
  __Pyx_memviewslice __pyx_v_canny_kernel = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_rgb_array = { 0, 0, { 0 }, { 0 }, { 0 } };
  short __pyx_v_kernel_half;
  __Pyx_memviewslice __pyx_v_output_array = { 0, 0, { 0 }, { 0 }, { 0 } };
  int __pyx_v_x;
  int __pyx_v_y;
  int __pyx_v_xx;
  int __pyx_v_yy;
  unsigned short __pyx_v_red;
  unsigned short __pyx_v_green;
  unsigned short __pyx_v_blue;
  short __pyx_v_kernel_offset_y;
  short __pyx_v_kernel_offset_x;
  float __pyx_v_r;
  float __pyx_v_g;
  float __pyx_v_b;
  float __pyx_v_k;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("canny_blur5x5_surface24_c", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_20, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_21, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_22, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.canny_blur5x5_surface24_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_kernel);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_rgb_array_);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_canny_kernel, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_rgb_array, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_output_array, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_3canny_blur5x5_surface24_c(PyObject *__pyx_self, PyObject *__pyx_v_surface_); /*proto*/
static char __pyx_doc_12PygameShader_15gaussianBlur5x5_2canny_blur5x5_surface24_c[] = "\n    # Gaussian kernel 5x5\n        # |2   4   5   4  2|\n        # |4   9  12   9  4|\n        # |5  12  15  12  5|  x 1/159\n        # |4   9  12   9  4|\n        # |2   4   5   4  2|\n    pixels convoluted outside image edges will be set to adjacent edge value\n\n    :param surface_: Surface, 8, 24-32 bit format\n    :return: return a numpy.ndarray (w, h, 3) uint8 with RGB values\n    ";
static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_3canny_blur5x5_surface24_c(PyObject *__pyx_self, PyObject *__pyx_v_surface_) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("canny_blur5x5_surface24_c (wrapper)", 0);
  __pyx_r = __pyx_pf_12PygameShader_15gaussianBlur5x5_2canny_blur5x5_surface24_c(__pyx_self, ((PyObject *)__pyx_v_surface_));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_12PygameShader_15gaussianBlur5x5_2canny_blur5x5_surface24_c(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_surface_) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("canny_blur5x5_surface24_c", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_12PygameShader_15gaussianBlur5x5_canny_blur5x5_surface24_c(__pyx_v_surface_, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 272, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.canny_blur5x5_surface24_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">273</span>: <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">274</span>: <span class="sd">    # Gaussian kernel 5x5</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">275</span>: <span class="sd">        # |2   4   5   4  2|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">276</span>: <span class="sd">        # |4   9  12   9  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">277</span>: <span class="sd">        # |5  12  15  12  5|  x 1/159</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">278</span>: <span class="sd">        # |4   9  12   9  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">279</span>: <span class="sd">        # |2   4   5   4  2|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">280</span>: <span class="sd">    pixels convoluted outside image edges will be set to adjacent edge value</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">281</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">282</span>: <span class="sd">    :param surface_: Surface, 8, 24-32 bit format</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">283</span>: <span class="sd">    :return: return a numpy.ndarray (w, h, 3) uint8 with RGB values</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">284</span>: <span class="sd">    &quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">285</span>: </pre>
<pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">286</span>:     <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">surface_</span><span class="p">,</span> <span class="n">Surface</span><span class="p">),</span><span class="w">\</span></pre>
<pre class='cython code score-8 '>  #ifndef CYTHON_WITHOUT_ASSERTIONS
  if (unlikely(__pyx_assertions_enabled())) {
    <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Surface);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 286, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_2 = <span class='py_c_api'>PyObject_IsInstance</span>(__pyx_v_surface_, __pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 286, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!(__pyx_t_2 != 0))) {
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">287</span>:         <span class="s">&#39;Argument image must be a valid Surface, got </span><span class="si">%s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">surface_</span><span class="p">)</span></pre>
<pre class='cython code score-8 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyUnicode_FormatSafe</span>(__pyx_kp_u_Argument_image_must_be_a_valid_S, ((PyObject *)Py_TYPE(__pyx_v_surface_)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 287, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='py_c_api'>PyErr_SetObject</span>(PyExc_AssertionError, __pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='error_goto'>__PYX_ERR(0, 286, __pyx_L1_error)</span>
    }
  }
  #endif
</pre><pre class="cython line score-0">&#xA0;<span class="">288</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">289</span>:     <span class="c"># kernel definition</span></pre>
<pre class="cython line score-45" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">290</span>:     <span class="n">kernel</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mf">2.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">5.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">2.0</span><span class="p">],</span></pre>
<pre class='cython code score-45 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_numpy);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 290, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_array);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 290, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 290, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_float_2_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_float_5_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 4, __pyx_float_2_0);
/* … */
  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 290, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, __pyx_t_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, __pyx_t_8);
  __pyx_t_3 = 0;
  __pyx_t_5 = 0;
  __pyx_t_6 = 0;
  __pyx_t_7 = 0;
  __pyx_t_8 = 0;
  __pyx_t_8 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_8 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_8)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
    }
  }
  __pyx_t_1 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_8, __pyx_t_9) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(0, 290, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">291</span>:                           <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">],</span></pre>
<pre class='cython code score-15 '>  __pyx_t_5 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 291, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 0, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 1, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 2, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 3, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 4, __pyx_float_4_0);
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">292</span>:                           <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="mf">5.0</span><span class="p">],</span></pre>
<pre class='cython code score-15 '>  __pyx_t_6 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 292, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 0, __pyx_float_5_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 1, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_15_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_15_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 2, __pyx_float_15_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 3, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 4, __pyx_float_5_0);
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">293</span>:                           <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">],</span></pre>
<pre class='cython code score-15 '>  __pyx_t_7 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 293, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 0, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 1, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 2, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 3, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 4, __pyx_float_4_0);
</pre><pre class="cython line score-37" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">294</span>:                           <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">5.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">2.0</span><span class="p">]))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-37 '>  __pyx_t_8 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 294, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 0, __pyx_float_2_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 1, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 2, __pyx_float_5_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 3, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 4, __pyx_float_2_0);
/* … */
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_astype);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 294, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 294, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_9, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 294, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 294, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_order, __pyx_n_u_C) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 294, __pyx_L1_error)</span>
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 294, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_kernel = __pyx_t_9;
  __pyx_t_9 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">295</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">296</span>:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">w</span><span class="p">,</span> <span class="nf">h</span></pre>
<pre class="cython line score-78" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">297</span>:     <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">surface_</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span></pre>
<pre class='cython code score-78 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_surface_, __pyx_n_s_get_size);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_9 = (__pyx_t_4) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_4) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_9)) <span class='error_goto'>__PYX_ERR(0, 297, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_9))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))) {
    PyObject* sequence = __pyx_t_9;
    Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
    if (unlikely(size != 2)) {
      if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
      else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
      <span class='error_goto'>__PYX_ERR(0, 297, __pyx_L1_error)</span>
    }
    #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
    if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
      __pyx_t_1 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
      __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
    } else {
      __pyx_t_1 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
      __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
    #else
    __pyx_t_1 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 297, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    #endif
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_8 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_9);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 297, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_10 = Py_TYPE(__pyx_t_8)-&gt;tp_iternext;
    index = 0; __pyx_t_1 = __pyx_t_10(__pyx_t_8); if (unlikely(!__pyx_t_1)) goto __pyx_L3_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    index = 1; __pyx_t_4 = __pyx_t_10(__pyx_t_8); if (unlikely(!__pyx_t_4)) goto __pyx_L3_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_10(__pyx_t_8), 2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 297, __pyx_L1_error)</span>
    __pyx_t_10 = NULL;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_10 = NULL;
    if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
    <span class='error_goto'>__PYX_ERR(0, 297, __pyx_L1_error)</span>
    __pyx_L4_unpacking_done:;
  }
  __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_1); if (unlikely((__pyx_t_11 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 297, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_4); if (unlikely((__pyx_t_12 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 297, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_w = __pyx_t_11;
  __pyx_v_h = __pyx_t_12;
</pre><pre class="cython line score-0">&#xA0;<span class="">298</span>: </pre>
<pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">299</span>:     <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-13 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
    goto __pyx_L10_try_end;
    __pyx_L5_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
/* … */
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_15);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_13, __pyx_t_14, __pyx_t_15);
    goto __pyx_L1_error;
    __pyx_L10_try_end:;
  }
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">300</span>:         <span class="n">rgb_array_</span> <span class="o">=</span> <span class="n">pixels3d</span><span class="p">(</span><span class="n">surface_</span><span class="p">)</span></pre>
<pre class='cython code score-16 '>      <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_pixels3d);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 300, __pyx_L5_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_1 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_1)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        }
      }
      __pyx_t_9 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_1, __pyx_v_surface_) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_v_surface_);
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(!__pyx_t_9)) <span class='error_goto'>__PYX_ERR(0, 300, __pyx_L5_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_rgb_array_ = __pyx_t_9;
      __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">301</span>:     <span class="k">except</span> <span class="p">(</span><span class="n">surface_</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span></pre>
<pre class='cython code score-15 '>    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_4, &amp;__pyx_t_1);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_surface_, __pyx_n_s_error);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 301, __pyx_L7_except_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(__pyx_t_9, __pyx_t_8) || <span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(__pyx_t_9, __pyx_builtin_ValueError);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_t_9, __pyx_t_4, __pyx_t_1);
    __pyx_t_9 = 0; __pyx_t_4 = 0; __pyx_t_1 = 0;
    if (__pyx_t_12) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.canny_blur5x5_surface24_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_1, &amp;__pyx_t_4, &amp;__pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 301, __pyx_L7_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">302</span>:         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">Texture/image is not compatible.&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-10 '>      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_ValueError, __pyx_tuple__3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 302, __pyx_L7_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_8, 0, 0, 0);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      <span class='error_goto'>__PYX_ERR(0, 302, __pyx_L7_except_error)</span>
    }
    goto __pyx_L7_except_error;
    __pyx_L7_except_error:;
/* … */
  __pyx_tuple__3 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_u_Texture_image_is_not_compatible);<span class='error_goto'> if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 302, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__3);
</pre><pre class="cython line score-0">&#xA0;<span class="">303</span>: </pre>
<pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">304</span>:     <span class="k">assert</span> <span class="n">w</span> <span class="o">!=</span> <span class="mf">0</span> <span class="ow">or</span> <span class="n">h</span> <span class="o">!=</span><span class="mf">0</span><span class="p">,</span> <span class="s">&#39;image with incorrect dimensions (w&gt;0, h&gt;0) got (</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span></pre>
<pre class='cython code score-30 '>  #ifndef CYTHON_WITHOUT_ASSERTIONS
  if (unlikely(__pyx_assertions_enabled())) {
    __pyx_t_16 = ((__pyx_v_w != 0) != 0);
    if (!__pyx_t_16) {
    } else {
      __pyx_t_2 = __pyx_t_16;
      goto __pyx_L13_bool_binop_done;
    }
    __pyx_t_16 = ((__pyx_v_h != 0) != 0);
    __pyx_t_2 = __pyx_t_16;
    __pyx_L13_bool_binop_done:;
    if (unlikely(!__pyx_t_2)) {
      __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 304, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      __pyx_t_17 = 0;
      __pyx_t_18 = 127;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_u_image_with_incorrect_dimensions);
      __pyx_t_17 += 48;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_u_image_with_incorrect_dimensions);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_kp_u_image_with_incorrect_dimensions);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyUnicode_From_int</span>(__pyx_v_w, 0, ' ', 'd');<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 304, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_17 += <span class='pyx_c_api'>__Pyx_PyUnicode_GET_LENGTH</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_4);
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_u__4);
      __pyx_t_17 += 2;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_u__4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_kp_u__4);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyUnicode_From_int</span>(__pyx_v_h, 0, ' ', 'd');<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 304, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_17 += <span class='pyx_c_api'>__Pyx_PyUnicode_GET_LENGTH</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, __pyx_t_4);
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_u__5);
      __pyx_t_17 += 2;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_u__5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, __pyx_kp_u__5);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyUnicode_Join</span>(__pyx_t_9, 5, __pyx_t_17, __pyx_t_18);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 304, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      <span class='py_c_api'>PyErr_SetObject</span>(PyExc_AssertionError, __pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='error_goto'>__PYX_ERR(0, 304, __pyx_L1_error)</span>
    }
  }
  #endif
</pre><pre class="cython line score-0">&#xA0;<span class="">305</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">306</span>:     <span class="k">cdef</span><span class="p">:</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">307</span>:         <span class="nb">float</span> <span class="n">kernel_weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_9, __pyx_n_s_sum);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 307, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_9))) {
    __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_9);
    if (likely(__pyx_t_1)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_9, function);
    }
  }
  __pyx_t_4 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_1, __pyx_v_kernel) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_9, __pyx_v_kernel);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_4)) <span class='error_goto'>__PYX_ERR(0, 307, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_t_19 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_4); if (unlikely((__pyx_t_19 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 307, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_kernel_weight = __pyx_t_19;
</pre><pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">308</span>:         <span class="nb">float</span> <span class="p">[:,</span> <span class="p">:]</span> <span class="n">canny_kernel</span> <span class="o">=</span> <span class="n">divide</span><span class="p">(</span><span class="n">kernel</span><span class="p">,</span> <span class="mf">159.0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">)</span></pre>
<pre class='cython code score-29 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_divide);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_kernel);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_kernel);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_v_kernel);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_159_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_159_0);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_float_159_0);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_8, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_8) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_9, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsds_float</span>(__pyx_t_8, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_20.memview)) __PYX_ERR(0, 308, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_v_canny_kernel = __pyx_t_20;
  __pyx_t_20.memview = NULL;
  __pyx_t_20.data = NULL;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">309</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="n">rgb_array</span> <span class="o">=</span> <span class="n">rgb_array_</span></pre>
<pre class='cython code score-2 '>  __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsdsds_unsigned_char</span>(__pyx_v_rgb_array_, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_21.memview)) __PYX_ERR(0, 309, __pyx_L1_error)</span>
  __pyx_v_rgb_array = __pyx_t_21;
  __pyx_t_21.memview = NULL;
  __pyx_t_21.data = NULL;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">310</span>:         <span class="n">short</span> <span class="n">kernel_half</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">short</span><span class="p">&gt;(</span><span class="nb">len</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mf">1</span><span class="p">)</span></pre>
<pre class='cython code score-5 '>  __pyx_t_17 = <span class='py_c_api'>PyObject_Length</span>(__pyx_v_kernel);<span class='error_goto'> if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 310, __pyx_L1_error)</span>
  __pyx_v_kernel_half = ((short)(__pyx_t_17 &gt;&gt; 1));
</pre><pre class="cython line score-44" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">311</span>:         <span class="nb">float</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">output_array</span> <span class="o">=</span> <span class="n">empty</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">)</span></pre>
<pre class='cython code score-44 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_8, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_9);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 2, __pyx_int_3);
  __pyx_t_1 = 0;
  __pyx_t_9 = 0;
  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_4);
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_order, __pyx_n_u_C) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_dtype, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_9, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_22 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_d_d_dc_float</span>(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_22.memview)) __PYX_ERR(0, 311, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_output_array = __pyx_t_22;
  __pyx_t_22.memview = NULL;
  __pyx_t_22.data = NULL;
</pre><pre class="cython line score-0">&#xA0;<span class="">312</span>:         <span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">313</span>:         <span class="nb">unsigned</span> <span class="n">short</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">314</span>:         <span class="n">short</span> <span class="n">kernel_offset_y</span><span class="p">,</span> <span class="n">kernel_offset_x</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">315</span>:         <span class="nb">float</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">k</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">316</span>: </pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">317</span>:     <span class="k">with</span> <span class="k">nogil</span><span class="p">:</span></pre>
<pre class='cython code score-4 '>  {
      #ifdef WITH_THREAD
      PyThreadState *_save;
      Py_UNBLOCK_THREADS
      <span class='pyx_c_api'>__Pyx_FastGIL_Remember</span>();
      #endif
      /*try:*/ {
/* … */
      /*finally:*/ {
        /*normal exit:*/{
          #ifdef WITH_THREAD
          <span class='pyx_c_api'>__Pyx_FastGIL_Forget</span>();
          Py_BLOCK_THREADS
          #endif
          goto __pyx_L17;
        }
        __pyx_L17:;
      }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">318</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">319</span>:         <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">SCHEDULE</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">THREAD_NUMBER</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_12 = __pyx_v_w;
        if ((1 == 0)) abort();
        {
            #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
                #undef likely
                #undef unlikely
                #define likely(x)   (x)
                #define unlikely(x) (x)
            #endif
            __pyx_t_24 = (__pyx_t_12 - 0 + 1 - 1/abs(1)) / 1;
            if (__pyx_t_24 &gt; 0)
            {
                #ifdef _OPENMP
                #pragma omp parallel
                #endif /* _OPENMP */
                {
                    #ifdef _OPENMP
                    #pragma omp for lastprivate(__pyx_v_b) lastprivate(__pyx_v_blue) lastprivate(__pyx_v_g) lastprivate(__pyx_v_green) lastprivate(__pyx_v_k) lastprivate(__pyx_v_kernel_offset_x) lastprivate(__pyx_v_kernel_offset_y) lastprivate(__pyx_v_r) lastprivate(__pyx_v_red) firstprivate(__pyx_v_x) lastprivate(__pyx_v_x) lastprivate(__pyx_v_xx) lastprivate(__pyx_v_y) lastprivate(__pyx_v_yy) schedule(static) num_threads(8)
                    #endif /* _OPENMP */
                    for (__pyx_t_23 = 0; __pyx_t_23 &lt; __pyx_t_24; __pyx_t_23++){
                        {
                            __pyx_v_x = (int)(0 + 1 * __pyx_t_23);
                            /* Initialize private variables to invalid values */
                            __pyx_v_b = ((float)__PYX_NAN());
                            __pyx_v_blue = ((unsigned short)0xbad0bad0);
                            __pyx_v_g = ((float)__PYX_NAN());
                            __pyx_v_green = ((unsigned short)0xbad0bad0);
                            __pyx_v_k = ((float)__PYX_NAN());
                            __pyx_v_kernel_offset_x = ((short)0xbad0bad0);
                            __pyx_v_kernel_offset_y = ((short)0xbad0bad0);
                            __pyx_v_r = ((float)__PYX_NAN());
                            __pyx_v_red = ((unsigned short)0xbad0bad0);
                            __pyx_v_xx = ((int)0xbad0bad0);
                            __pyx_v_y = ((int)0xbad0bad0);
                            __pyx_v_yy = ((int)0xbad0bad0);
</pre><pre class="cython line score-0">&#xA0;<span class="">320</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">321</span>:             <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                            __pyx_t_11 = __pyx_v_h;
                            __pyx_t_25 = __pyx_t_11;
                            for (__pyx_t_26 = 0; __pyx_t_26 &lt; __pyx_t_25; __pyx_t_26+=1) {
                              __pyx_v_y = __pyx_t_26;
</pre><pre class="cython line score-0">&#xA0;<span class="">322</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">323</span>:                 <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_19 = 0.0;
                              __pyx_t_27 = 0.0;
                              __pyx_t_28 = 0.0;
                              __pyx_v_r = __pyx_t_19;
                              __pyx_v_g = __pyx_t_27;
                              __pyx_v_b = __pyx_t_28;
</pre><pre class="cython line score-0">&#xA0;<span class="">324</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">325</span>:                 <span class="k">for</span> <span class="n">kernel_offset_y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_29 = (__pyx_v_kernel_half + 1);
                              __pyx_t_30 = __pyx_t_29;
                              for (__pyx_t_31 = (-__pyx_v_kernel_half); __pyx_t_31 &lt; __pyx_t_30; __pyx_t_31+=1) {
                                __pyx_v_kernel_offset_y = __pyx_t_31;
</pre><pre class="cython line score-0">&#xA0;<span class="">326</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">327</span>:                     <span class="k">for</span> <span class="n">kernel_offset_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_32 = (__pyx_v_kernel_half + 1);
                                __pyx_t_33 = __pyx_t_32;
                                for (__pyx_t_34 = (-__pyx_v_kernel_half); __pyx_t_34 &lt; __pyx_t_33; __pyx_t_34+=1) {
                                  __pyx_v_kernel_offset_x = __pyx_t_34;
</pre><pre class="cython line score-0">&#xA0;<span class="">328</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">329</span>:                         <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">kernel_offset_x</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_xx = (__pyx_v_x + __pyx_v_kernel_offset_x);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">330</span>:                         <span class="n">yy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">kernel_offset_y</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_yy = (__pyx_v_y + __pyx_v_kernel_offset_y);
</pre><pre class="cython line score-0">&#xA0;<span class="">331</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">332</span>:                         <span class="k">if</span> <span class="n">xx</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_xx &lt; 0) != 0);
                                  if (__pyx_t_2) {
/* … */
                                    goto __pyx_L28;
                                  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">333</span>:                             <span class="n">xx</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_xx = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">334</span>:                         <span class="k">elif</span> <span class="n">xx</span> <span class="o">&gt;</span> <span class="n">w</span> <span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_xx &gt; __pyx_v_w) != 0);
                                  if (__pyx_t_2) {
/* … */
                                  }
                                  __pyx_L28:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">335</span>:                             <span class="n">xx</span> <span class="o">=</span> <span class="n">w</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_xx = __pyx_v_w;
</pre><pre class="cython line score-0">&#xA0;<span class="">336</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">337</span>:                         <span class="k">if</span> <span class="n">yy</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_yy &lt; 0) != 0);
                                  if (__pyx_t_2) {
/* … */
                                    goto __pyx_L29;
                                  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">338</span>:                             <span class="n">yy</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_yy = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">339</span>:                         <span class="k">elif</span> <span class="n">yy</span> <span class="o">&gt;</span> <span class="n">h</span> <span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_yy &gt; __pyx_v_h) != 0);
                                  if (__pyx_t_2) {
/* … */
                                  }
                                  __pyx_L29:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">340</span>:                             <span class="n">yy</span> <span class="o">=</span> <span class="n">h</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_yy = __pyx_v_h;
</pre><pre class="cython line score-0">&#xA0;<span class="">341</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">342</span>:                         <span class="n">red</span>   <span class="o">=</span> <span class="n">rgb_array</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_37 = 0;
                                  __pyx_v_red = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array.data + __pyx_t_35 * __pyx_v_rgb_array.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">343</span>:                         <span class="n">green</span> <span class="o">=</span> <span class="n">rgb_array</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_35 = 1;
                                  __pyx_v_green = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array.data + __pyx_t_37 * __pyx_v_rgb_array.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">344</span>:                         <span class="n">blue</span>  <span class="o">=</span> <span class="n">rgb_array</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_37 = 2;
                                  __pyx_v_blue = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array.data + __pyx_t_35 * __pyx_v_rgb_array.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array.strides[2]) )));
</pre><pre class="cython line score-0">&#xA0;<span class="">345</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">346</span>:                         <span class="n">k</span> <span class="o">=</span> <span class="n">canny_kernel</span><span class="p">[</span><span class="n">kernel_offset_y</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = (__pyx_v_kernel_offset_y + __pyx_v_kernel_half);
                                  __pyx_t_36 = (__pyx_v_kernel_offset_x + __pyx_v_kernel_half);
                                  __pyx_v_k = (*((float *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_canny_kernel.data + __pyx_t_37 * __pyx_v_canny_kernel.strides[0]) ) + __pyx_t_36 * __pyx_v_canny_kernel.strides[1]) )));
</pre><pre class="cython line score-0">&#xA0;<span class="">347</span>:                                          <span class="n">kernel_offset_x</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">]</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">348</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">349</span>:                         <span class="n">r</span> <span class="o">+=</span> <span class="n">red</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_r = (__pyx_v_r + (__pyx_v_red * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">350</span>:                         <span class="n">g</span> <span class="o">+=</span> <span class="n">green</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_g = (__pyx_v_g + (__pyx_v_green * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">351</span>:                         <span class="n">b</span> <span class="o">+=</span> <span class="n">blue</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_b = (__pyx_v_b + (__pyx_v_blue * __pyx_v_k));
                                }
                              }
</pre><pre class="cython line score-0">&#xA0;<span class="">352</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">353</span>:                 <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">/</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">25.0</span></pre>
<pre class='cython code score-0 '>                              __pyx_v_r = (__pyx_v_r / ((float)25.0));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">354</span>:                 <span class="n">g</span> <span class="o">=</span> <span class="n">g</span> <span class="o">/</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">25.0</span></pre>
<pre class='cython code score-0 '>                              __pyx_v_g = (__pyx_v_g / ((float)25.0));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">355</span>:                 <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">/</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">25.0</span></pre>
<pre class='cython code score-0 '>                              __pyx_v_b = (__pyx_v_b / ((float)25.0));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">356</span>:                 <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mf">255.0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_2 = ((__pyx_v_r &gt; 255.0) != 0);
                              if (__pyx_t_2) {
/* … */
                              }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">357</span>:                     <span class="n">r</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">255.0</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_r = ((float)255.0);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">358</span>:                 <span class="k">if</span> <span class="n">g</span> <span class="o">&gt;</span> <span class="mf">255.0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_2 = ((__pyx_v_g &gt; 255.0) != 0);
                              if (__pyx_t_2) {
/* … */
                              }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">359</span>:                     <span class="n">g</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">255.0</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_g = ((float)255.0);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">360</span>:                 <span class="k">if</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mf">255.0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_2 = ((__pyx_v_b &gt; 255.0) != 0);
                              if (__pyx_t_2) {
/* … */
                              }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">361</span>:                     <span class="n">b</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">255.0</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_b = ((float)255.0);
</pre><pre class="cython line score-0">&#xA0;<span class="">362</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">363</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_36 = __pyx_v_x;
                              __pyx_t_37 = __pyx_v_y;
                              __pyx_t_35 = 0;
                              *((float *) ( /* dim=2 */ ((char *) (((float *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_36 * __pyx_v_output_array.strides[0]) ) + __pyx_t_37 * __pyx_v_output_array.strides[1]) )) + __pyx_t_35)) )) = __pyx_v_r;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">364</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_35 = __pyx_v_x;
                              __pyx_t_37 = __pyx_v_y;
                              __pyx_t_36 = 1;
                              *((float *) ( /* dim=2 */ ((char *) (((float *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_35 * __pyx_v_output_array.strides[0]) ) + __pyx_t_37 * __pyx_v_output_array.strides[1]) )) + __pyx_t_36)) )) = __pyx_v_g;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">365</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_36 = __pyx_v_x;
                              __pyx_t_37 = __pyx_v_y;
                              __pyx_t_35 = 2;
                              *((float *) ( /* dim=2 */ ((char *) (((float *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_36 * __pyx_v_output_array.strides[0]) ) + __pyx_t_37 * __pyx_v_output_array.strides[1]) )) + __pyx_t_35)) )) = __pyx_v_b;
                            }
                        }
                    }
                }
            }
        }
        #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
            #undef likely
            #undef unlikely
            #define likely(x)   __builtin_expect(!!(x), 1)
            #define unlikely(x) __builtin_expect(!!(x), 0)
        #endif
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">366</span>: </pre>
<pre class="cython line score-35" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">367</span>:     <span class="k">return</span> <span class="n">asarray</span><span class="p">(</span><span class="n">output_array</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">uint8</span><span class="p">)</span></pre>
<pre class='cython code score-35 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_9 = __pyx_memoryview_fromslice(__pyx_v_output_array, 3, (PyObject *(*)(char *)) __pyx_memview_get_float, (int (*)(char *, PyObject *)) __pyx_memview_set_float, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_8 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_8 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_8)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
    }
  }
  __pyx_t_1 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_8, __pyx_t_9) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_astype);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_9, __pyx_n_s_uint8);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 367, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_9;
  __pyx_t_9 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">368</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">369</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">370</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">371</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">372</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">nonecheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">373</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">cdivision</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">374</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">375</span>: <span class="k">cpdef</span> <span class="nf">canny_blur5x5_surface32_c</span><span class="p">(</span><span class="n">surface_</span><span class="p">):</span></pre>
<pre class='cython code score-17 '>static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_5canny_blur5x5_surface32_c(PyObject *__pyx_self, PyObject *__pyx_v_surface_); /*proto*/
static PyObject *__pyx_f_12PygameShader_15gaussianBlur5x5_canny_blur5x5_surface32_c(PyObject *__pyx_v_surface_, CYTHON_UNUSED int __pyx_skip_dispatch) {
  PyObject *__pyx_v_kernel = NULL;
  int __pyx_v_w;
  int __pyx_v_h;
  PyObject *__pyx_v_rgb_array_ = NULL;
  PyObject *__pyx_v_array_alpha_ = NULL;
  CYTHON_UNUSED float __pyx_v_kernel_weight;
  __Pyx_memviewslice __pyx_v_canny_kernel = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_rgb_array = { 0, 0, { 0 }, { 0 }, { 0 } };
  short __pyx_v_kernel_half;
  __Pyx_memviewslice __pyx_v_output_array = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_alpha = { 0, 0, { 0 }, { 0 }, { 0 } };
  int __pyx_v_x;
  int __pyx_v_y;
  int __pyx_v_xx;
  int __pyx_v_yy;
  unsigned char __pyx_v_red;
  unsigned char __pyx_v_green;
  unsigned char __pyx_v_blue;
  short __pyx_v_kernel_offset_y;
  short __pyx_v_kernel_offset_x;
  float __pyx_v_r;
  float __pyx_v_g;
  float __pyx_v_b;
  float __pyx_v_k;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("canny_blur5x5_surface32_c", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_20, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_21, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_22, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.canny_blur5x5_surface32_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_kernel);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_rgb_array_);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_array_alpha_);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_canny_kernel, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_rgb_array, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_output_array, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_alpha, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_5canny_blur5x5_surface32_c(PyObject *__pyx_self, PyObject *__pyx_v_surface_); /*proto*/
static char __pyx_doc_12PygameShader_15gaussianBlur5x5_4canny_blur5x5_surface32_c[] = "\n    # Gaussian kernel 5x5\n        # |2   4   5   4  2|\n        # |4   9  12   9  4|\n        # |5  12  15  12  5|  x 1/159\n        # |4   9  12   9  4|\n        # |2   4   5   4  2|\n    pixels convoluted outside image edges will be set to adjacent edge value\n\n    :param surface_: Surface, 8, 24-32 bit format\n    :return: return a numpy.ndarray (w, h, 3) uint8 with RGB values\n    ";
static PyObject *__pyx_pw_12PygameShader_15gaussianBlur5x5_5canny_blur5x5_surface32_c(PyObject *__pyx_self, PyObject *__pyx_v_surface_) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("canny_blur5x5_surface32_c (wrapper)", 0);
  __pyx_r = __pyx_pf_12PygameShader_15gaussianBlur5x5_4canny_blur5x5_surface32_c(__pyx_self, ((PyObject *)__pyx_v_surface_));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_12PygameShader_15gaussianBlur5x5_4canny_blur5x5_surface32_c(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_surface_) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("canny_blur5x5_surface32_c", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_12PygameShader_15gaussianBlur5x5_canny_blur5x5_surface32_c(__pyx_v_surface_, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 375, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.canny_blur5x5_surface32_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">376</span>: <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">377</span>: <span class="sd">    # Gaussian kernel 5x5</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">378</span>: <span class="sd">        # |2   4   5   4  2|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">379</span>: <span class="sd">        # |4   9  12   9  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">380</span>: <span class="sd">        # |5  12  15  12  5|  x 1/159</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">381</span>: <span class="sd">        # |4   9  12   9  4|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">382</span>: <span class="sd">        # |2   4   5   4  2|</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">383</span>: <span class="sd">    pixels convoluted outside image edges will be set to adjacent edge value</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">384</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">385</span>: <span class="sd">    :param surface_: Surface, 8, 24-32 bit format</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">386</span>: <span class="sd">    :return: return a numpy.ndarray (w, h, 3) uint8 with RGB values</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">387</span>: <span class="sd">    &quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">388</span>: </pre>
<pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">389</span>:     <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">surface_</span><span class="p">,</span> <span class="n">Surface</span><span class="p">),</span> <span class="w">\</span></pre>
<pre class='cython code score-8 '>  #ifndef CYTHON_WITHOUT_ASSERTIONS
  if (unlikely(__pyx_assertions_enabled())) {
    <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Surface);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 389, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_2 = <span class='py_c_api'>PyObject_IsInstance</span>(__pyx_v_surface_, __pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 389, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!(__pyx_t_2 != 0))) {
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">390</span>:         <span class="s">&#39;Argument image must be a valid Surface, got </span><span class="si">%s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">surface_</span><span class="p">)</span></pre>
<pre class='cython code score-8 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyUnicode_FormatSafe</span>(__pyx_kp_u_Argument_image_must_be_a_valid_S, ((PyObject *)Py_TYPE(__pyx_v_surface_)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 390, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='py_c_api'>PyErr_SetObject</span>(PyExc_AssertionError, __pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='error_goto'>__PYX_ERR(0, 389, __pyx_L1_error)</span>
    }
  }
  #endif
</pre><pre class="cython line score-0">&#xA0;<span class="">391</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">392</span>:     <span class="c"># kernel definition</span></pre>
<pre class="cython line score-45" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">393</span>:     <span class="n">kernel</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mf">2.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">5.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">2.0</span><span class="p">],</span></pre>
<pre class='cython code score-45 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_numpy);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_array);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_float_2_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_float_5_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 4, __pyx_float_2_0);
/* … */
  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, __pyx_t_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, __pyx_t_8);
  __pyx_t_3 = 0;
  __pyx_t_5 = 0;
  __pyx_t_6 = 0;
  __pyx_t_7 = 0;
  __pyx_t_8 = 0;
  __pyx_t_8 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_8 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_8)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
    }
  }
  __pyx_t_1 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_8, __pyx_t_9) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">394</span>:                           <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">],</span></pre>
<pre class='cython code score-15 '>  __pyx_t_5 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 0, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 1, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 2, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 3, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_5, 4, __pyx_float_4_0);
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">395</span>:                           <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="mf">5.0</span><span class="p">],</span></pre>
<pre class='cython code score-15 '>  __pyx_t_6 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 395, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 0, __pyx_float_5_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 1, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_15_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_15_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 2, __pyx_float_15_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 3, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 4, __pyx_float_5_0);
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">396</span>:                           <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="mf">9.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">],</span></pre>
<pre class='cython code score-15 '>  __pyx_t_7 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 396, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 0, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 1, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_12_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_12_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 2, __pyx_float_12_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_9_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_9_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 3, __pyx_float_9_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_7, 4, __pyx_float_4_0);
</pre><pre class="cython line score-37" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">397</span>:                           <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">5.0</span><span class="p">,</span>  <span class="mf">4.0</span><span class="p">,</span>  <span class="mf">2.0</span><span class="p">]))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-37 '>  __pyx_t_8 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 397, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 0, __pyx_float_2_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 1, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_5_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_5_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 2, __pyx_float_5_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_4_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_4_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 3, __pyx_float_4_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_2_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_2_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_8, 4, __pyx_float_2_0);
/* … */
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_astype);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 397, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 397, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_9, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 397, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 397, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_order, __pyx_n_u_C) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 397, __pyx_L1_error)</span>
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 397, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_kernel = __pyx_t_9;
  __pyx_t_9 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">398</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">399</span>:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">w</span><span class="p">,</span> <span class="nf">h</span></pre>
<pre class="cython line score-78" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">400</span>:     <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">surface_</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span></pre>
<pre class='cython code score-78 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_surface_, __pyx_n_s_get_size);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 400, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_9 = (__pyx_t_4) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_4) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_9)) <span class='error_goto'>__PYX_ERR(0, 400, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_9))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))) {
    PyObject* sequence = __pyx_t_9;
    Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
    if (unlikely(size != 2)) {
      if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
      else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
      <span class='error_goto'>__PYX_ERR(0, 400, __pyx_L1_error)</span>
    }
    #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
    if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
      __pyx_t_1 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
      __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
    } else {
      __pyx_t_1 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
      __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
    #else
    __pyx_t_1 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 400, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 400, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    #endif
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_8 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_9);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 400, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_10 = Py_TYPE(__pyx_t_8)-&gt;tp_iternext;
    index = 0; __pyx_t_1 = __pyx_t_10(__pyx_t_8); if (unlikely(!__pyx_t_1)) goto __pyx_L3_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    index = 1; __pyx_t_4 = __pyx_t_10(__pyx_t_8); if (unlikely(!__pyx_t_4)) goto __pyx_L3_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_10(__pyx_t_8), 2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 400, __pyx_L1_error)</span>
    __pyx_t_10 = NULL;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_10 = NULL;
    if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
    <span class='error_goto'>__PYX_ERR(0, 400, __pyx_L1_error)</span>
    __pyx_L4_unpacking_done:;
  }
  __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_1); if (unlikely((__pyx_t_11 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 400, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_4); if (unlikely((__pyx_t_12 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 400, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_w = __pyx_t_11;
  __pyx_v_h = __pyx_t_12;
</pre><pre class="cython line score-0">&#xA0;<span class="">401</span>: </pre>
<pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">402</span>:     <span class="k">try</span><span class="p">:</span></pre>
<pre class='cython code score-13 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
    goto __pyx_L10_try_end;
    __pyx_L5_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
/* … */
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_15);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_13, __pyx_t_14, __pyx_t_15);
    goto __pyx_L1_error;
    __pyx_L10_try_end:;
  }
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">403</span>:         <span class="n">rgb_array_</span> <span class="o">=</span> <span class="n">pixels3d</span><span class="p">(</span><span class="n">surface_</span><span class="p">)</span></pre>
<pre class='cython code score-16 '>      <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_pixels3d);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 403, __pyx_L5_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_1 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_1)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        }
      }
      __pyx_t_9 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_1, __pyx_v_surface_) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_v_surface_);
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(!__pyx_t_9)) <span class='error_goto'>__PYX_ERR(0, 403, __pyx_L5_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_rgb_array_ = __pyx_t_9;
      __pyx_t_9 = 0;
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">404</span>:         <span class="n">array_alpha_</span> <span class="o">=</span> <span class="n">array_alpha</span><span class="p">(</span><span class="n">surface_</span><span class="p">)</span></pre>
<pre class='cython code score-16 '>      <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_array_alpha);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 404, __pyx_L5_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_1 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_1)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        }
      }
      __pyx_t_9 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_1, __pyx_v_surface_) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_v_surface_);
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(!__pyx_t_9)) <span class='error_goto'>__PYX_ERR(0, 404, __pyx_L5_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_array_alpha_ = __pyx_t_9;
      __pyx_t_9 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">405</span>: </pre>
<pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">406</span>:     <span class="k">except</span> <span class="p">(</span><span class="n">surface_</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span></pre>
<pre class='cython code score-15 '>    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_4, &amp;__pyx_t_1);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_surface_, __pyx_n_s_error);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 406, __pyx_L7_except_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(__pyx_t_9, __pyx_t_8) || <span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(__pyx_t_9, __pyx_builtin_ValueError);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_t_9, __pyx_t_4, __pyx_t_1);
    __pyx_t_9 = 0; __pyx_t_4 = 0; __pyx_t_1 = 0;
    if (__pyx_t_12) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("PygameShader.gaussianBlur5x5.canny_blur5x5_surface32_c", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_1, &amp;__pyx_t_4, &amp;__pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 406, __pyx_L7_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">407</span>:         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">Invalid texture or image. &#39;</span></pre>
<pre class='cython code score-10 '>      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_ValueError, __pyx_tuple__6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 407, __pyx_L7_except_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_8, 0, 0, 0);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      <span class='error_goto'>__PYX_ERR(0, 407, __pyx_L7_except_error)</span>
    }
    goto __pyx_L7_except_error;
    __pyx_L7_except_error:;
/* … */
  __pyx_tuple__6 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_u_Invalid_texture_or_image_This_v);<span class='error_goto'> if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 407, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__6);
</pre><pre class="cython line score-0">&#xA0;<span class="">408</span>:                          <span class="s">&#39;This version is compatible with 32-bit image format &#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">409</span>:                          <span class="s">&#39;with per-pixel transparency.&#39;</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">410</span>: </pre>
<pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">411</span>:     <span class="k">assert</span> <span class="n">w</span> <span class="o">!=</span> <span class="mf">0</span> <span class="ow">or</span> <span class="n">h</span> <span class="o">!=</span><span class="mf">0</span><span class="p">,</span> <span class="s">&#39;image with incorrect dimensions (w&gt;0, h&gt;0) got (</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span></pre>
<pre class='cython code score-30 '>  #ifndef CYTHON_WITHOUT_ASSERTIONS
  if (unlikely(__pyx_assertions_enabled())) {
    __pyx_t_16 = ((__pyx_v_w != 0) != 0);
    if (!__pyx_t_16) {
    } else {
      __pyx_t_2 = __pyx_t_16;
      goto __pyx_L13_bool_binop_done;
    }
    __pyx_t_16 = ((__pyx_v_h != 0) != 0);
    __pyx_t_2 = __pyx_t_16;
    __pyx_L13_bool_binop_done:;
    if (unlikely(!__pyx_t_2)) {
      __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 411, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      __pyx_t_17 = 0;
      __pyx_t_18 = 127;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_u_image_with_incorrect_dimensions);
      __pyx_t_17 += 48;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_u_image_with_incorrect_dimensions);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_kp_u_image_with_incorrect_dimensions);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyUnicode_From_int</span>(__pyx_v_w, 0, ' ', 'd');<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 411, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_17 += <span class='pyx_c_api'>__Pyx_PyUnicode_GET_LENGTH</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_4);
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_u__4);
      __pyx_t_17 += 2;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_u__4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_kp_u__4);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyUnicode_From_int</span>(__pyx_v_h, 0, ' ', 'd');<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 411, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_17 += <span class='pyx_c_api'>__Pyx_PyUnicode_GET_LENGTH</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, __pyx_t_4);
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_u__5);
      __pyx_t_17 += 2;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_u__5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, __pyx_kp_u__5);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyUnicode_Join</span>(__pyx_t_9, 5, __pyx_t_17, __pyx_t_18);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 411, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      <span class='py_c_api'>PyErr_SetObject</span>(PyExc_AssertionError, __pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='error_goto'>__PYX_ERR(0, 411, __pyx_L1_error)</span>
    }
  }
  #endif
</pre><pre class="cython line score-0">&#xA0;<span class="">412</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">413</span>:     <span class="k">cdef</span><span class="p">:</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">414</span>:         <span class="nb">float</span> <span class="n">kernel_weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_9, __pyx_n_s_sum);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_9))) {
    __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_9);
    if (likely(__pyx_t_1)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_9, function);
    }
  }
  __pyx_t_4 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_1, __pyx_v_kernel) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_9, __pyx_v_kernel);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_4)) <span class='error_goto'>__PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_t_19 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_4); if (unlikely((__pyx_t_19 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_kernel_weight = __pyx_t_19;
</pre><pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">415</span>:         <span class="nb">float</span> <span class="p">[:,</span> <span class="p">:]</span> <span class="n">canny_kernel</span> <span class="o">=</span> <span class="n">divide</span><span class="p">(</span><span class="n">kernel</span><span class="p">,</span> <span class="mf">159.0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">)</span></pre>
<pre class='cython code score-29 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_divide);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_kernel);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_kernel);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_v_kernel);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_float_159_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_float_159_0);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_float_159_0);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_8, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_8) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_9, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsds_float</span>(__pyx_t_8, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_20.memview)) __PYX_ERR(0, 415, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_v_canny_kernel = __pyx_t_20;
  __pyx_t_20.memview = NULL;
  __pyx_t_20.data = NULL;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">416</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="n">rgb_array</span> <span class="o">=</span> <span class="n">rgb_array_</span></pre>
<pre class='cython code score-2 '>  __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsdsds_unsigned_char</span>(__pyx_v_rgb_array_, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_21.memview)) __PYX_ERR(0, 416, __pyx_L1_error)</span>
  __pyx_v_rgb_array = __pyx_t_21;
  __pyx_t_21.memview = NULL;
  __pyx_t_21.data = NULL;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">417</span>:         <span class="n">short</span> <span class="n">kernel_half</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">short</span><span class="p">&gt;(</span><span class="nb">len</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mf">1</span><span class="p">)</span></pre>
<pre class='cython code score-5 '>  __pyx_t_17 = <span class='py_c_api'>PyObject_Length</span>(__pyx_v_kernel);<span class='error_goto'> if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 417, __pyx_L1_error)</span>
  __pyx_v_kernel_half = ((short)(__pyx_t_17 &gt;&gt; 1));
</pre><pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">418</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="n">output_array</span> <span class="o">=</span> <span class="n">empty</span><span class="p">((</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mf">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">uint8</span><span class="p">)</span></pre>
<pre class='cython code score-39 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_8, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_9);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 2, __pyx_int_4);
  __pyx_t_1 = 0;
  __pyx_t_9 = 0;
  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_4);
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_uint8);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_dtype, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_9, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsdsds_unsigned_char</span>(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_21.memview)) __PYX_ERR(0, 418, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_output_array = __pyx_t_21;
  __pyx_t_21.memview = NULL;
  __pyx_t_21.data = NULL;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">419</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="p">[:,</span> <span class="p">:]</span> <span class="n">alpha</span> <span class="o">=</span> <span class="n">array_alpha_</span></pre>
<pre class='cython code score-2 '>  __pyx_t_22 = <span class='pyx_c_api'>__Pyx_PyObject_to_MemoryviewSlice_dsds_unsigned_char</span>(__pyx_v_array_alpha_, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_22.memview)) __PYX_ERR(0, 419, __pyx_L1_error)</span>
  __pyx_v_alpha = __pyx_t_22;
  __pyx_t_22.memview = NULL;
  __pyx_t_22.data = NULL;
</pre><pre class="cython line score-0">&#xA0;<span class="">420</span>:         <span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">421</span>:         <span class="nb">unsigned</span> <span class="n">char</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">422</span>:         <span class="n">short</span> <span class="n">kernel_offset_y</span><span class="p">,</span> <span class="n">kernel_offset_x</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">423</span>:         <span class="nb">float</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">k</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">424</span>: </pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">425</span>:     <span class="k">with</span> <span class="k">nogil</span><span class="p">:</span></pre>
<pre class='cython code score-4 '>  {
      #ifdef WITH_THREAD
      PyThreadState *_save;
      Py_UNBLOCK_THREADS
      <span class='pyx_c_api'>__Pyx_FastGIL_Remember</span>();
      #endif
      /*try:*/ {
/* … */
      /*finally:*/ {
        /*normal exit:*/{
          #ifdef WITH_THREAD
          <span class='pyx_c_api'>__Pyx_FastGIL_Forget</span>();
          Py_BLOCK_THREADS
          #endif
          goto __pyx_L17;
        }
        __pyx_L17:;
      }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">426</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">427</span>:         <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">SCHEDULE</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">THREAD_NUMBER</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_12 = __pyx_v_w;
        if ((1 == 0)) abort();
        {
            #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
                #undef likely
                #undef unlikely
                #define likely(x)   (x)
                #define unlikely(x) (x)
            #endif
            __pyx_t_24 = (__pyx_t_12 - 0 + 1 - 1/abs(1)) / 1;
            if (__pyx_t_24 &gt; 0)
            {
                #ifdef _OPENMP
                #pragma omp parallel
                #endif /* _OPENMP */
                {
                    #ifdef _OPENMP
                    #pragma omp for lastprivate(__pyx_v_b) lastprivate(__pyx_v_blue) lastprivate(__pyx_v_g) lastprivate(__pyx_v_green) lastprivate(__pyx_v_k) lastprivate(__pyx_v_kernel_offset_x) lastprivate(__pyx_v_kernel_offset_y) lastprivate(__pyx_v_r) lastprivate(__pyx_v_red) firstprivate(__pyx_v_x) lastprivate(__pyx_v_x) lastprivate(__pyx_v_xx) lastprivate(__pyx_v_y) lastprivate(__pyx_v_yy) schedule(static) num_threads(8)
                    #endif /* _OPENMP */
                    for (__pyx_t_23 = 0; __pyx_t_23 &lt; __pyx_t_24; __pyx_t_23++){
                        {
                            __pyx_v_x = (int)(0 + 1 * __pyx_t_23);
                            /* Initialize private variables to invalid values */
                            __pyx_v_b = ((float)__PYX_NAN());
                            __pyx_v_blue = ((unsigned char)'?');
                            __pyx_v_g = ((float)__PYX_NAN());
                            __pyx_v_green = ((unsigned char)'?');
                            __pyx_v_k = ((float)__PYX_NAN());
                            __pyx_v_kernel_offset_x = ((short)0xbad0bad0);
                            __pyx_v_kernel_offset_y = ((short)0xbad0bad0);
                            __pyx_v_r = ((float)__PYX_NAN());
                            __pyx_v_red = ((unsigned char)'?');
                            __pyx_v_xx = ((int)0xbad0bad0);
                            __pyx_v_y = ((int)0xbad0bad0);
                            __pyx_v_yy = ((int)0xbad0bad0);
</pre><pre class="cython line score-0">&#xA0;<span class="">428</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">429</span>:             <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                            __pyx_t_11 = __pyx_v_h;
                            __pyx_t_25 = __pyx_t_11;
                            for (__pyx_t_26 = 0; __pyx_t_26 &lt; __pyx_t_25; __pyx_t_26+=1) {
                              __pyx_v_y = __pyx_t_26;
</pre><pre class="cython line score-0">&#xA0;<span class="">430</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">431</span>:                 <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_19 = 0.0;
                              __pyx_t_27 = 0.0;
                              __pyx_t_28 = 0.0;
                              __pyx_v_r = __pyx_t_19;
                              __pyx_v_g = __pyx_t_27;
                              __pyx_v_b = __pyx_t_28;
</pre><pre class="cython line score-0">&#xA0;<span class="">432</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">433</span>:                 <span class="k">for</span> <span class="n">kernel_offset_y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_29 = (__pyx_v_kernel_half + 1);
                              __pyx_t_30 = __pyx_t_29;
                              for (__pyx_t_31 = (-__pyx_v_kernel_half); __pyx_t_31 &lt; __pyx_t_30; __pyx_t_31+=1) {
                                __pyx_v_kernel_offset_y = __pyx_t_31;
</pre><pre class="cython line score-0">&#xA0;<span class="">434</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">435</span>:                     <span class="k">for</span> <span class="n">kernel_offset_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">kernel_half</span><span class="p">,</span> <span class="n">kernel_half</span> <span class="o">+</span> <span class="mf">1</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>                                __pyx_t_32 = (__pyx_v_kernel_half + 1);
                                __pyx_t_33 = __pyx_t_32;
                                for (__pyx_t_34 = (-__pyx_v_kernel_half); __pyx_t_34 &lt; __pyx_t_33; __pyx_t_34+=1) {
                                  __pyx_v_kernel_offset_x = __pyx_t_34;
</pre><pre class="cython line score-0">&#xA0;<span class="">436</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">437</span>:                         <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">kernel_offset_x</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_xx = (__pyx_v_x + __pyx_v_kernel_offset_x);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">438</span>:                         <span class="n">yy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">kernel_offset_y</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_yy = (__pyx_v_y + __pyx_v_kernel_offset_y);
</pre><pre class="cython line score-0">&#xA0;<span class="">439</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">440</span>:                         <span class="k">if</span> <span class="n">xx</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_xx &lt; 0) != 0);
                                  if (__pyx_t_2) {
/* … */
                                    goto __pyx_L28;
                                  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">441</span>:                             <span class="n">xx</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_xx = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">442</span>:                         <span class="k">elif</span> <span class="n">xx</span> <span class="o">&gt;</span> <span class="n">w</span> <span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_xx &gt; __pyx_v_w) != 0);
                                  if (__pyx_t_2) {
/* … */
                                  }
                                  __pyx_L28:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">443</span>:                             <span class="n">xx</span> <span class="o">=</span> <span class="n">w</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_xx = __pyx_v_w;
</pre><pre class="cython line score-0">&#xA0;<span class="">444</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">445</span>:                         <span class="k">if</span> <span class="n">yy</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_yy &lt; 0) != 0);
                                  if (__pyx_t_2) {
/* … */
                                    goto __pyx_L29;
                                  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">446</span>:                             <span class="n">yy</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_yy = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">447</span>:                         <span class="k">elif</span> <span class="n">yy</span> <span class="o">&gt;</span> <span class="n">h</span> <span class="p">:</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_2 = ((__pyx_v_yy &gt; __pyx_v_h) != 0);
                                  if (__pyx_t_2) {
/* … */
                                  }
                                  __pyx_L29:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">448</span>:                             <span class="n">yy</span> <span class="o">=</span> <span class="n">h</span></pre>
<pre class='cython code score-0 '>                                    __pyx_v_yy = __pyx_v_h;
</pre><pre class="cython line score-0">&#xA0;<span class="">449</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">450</span>:                         <span class="n">red</span>   <span class="o">=</span> <span class="n">rgb_array</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_37 = 0;
                                  __pyx_v_red = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array.data + __pyx_t_35 * __pyx_v_rgb_array.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">451</span>:                         <span class="n">green</span> <span class="o">=</span> <span class="n">rgb_array</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_35 = 1;
                                  __pyx_v_green = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array.data + __pyx_t_37 * __pyx_v_rgb_array.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array.strides[1]) ) + __pyx_t_35 * __pyx_v_rgb_array.strides[2]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">452</span>:                         <span class="n">blue</span>  <span class="o">=</span> <span class="n">rgb_array</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_35 = __pyx_v_xx;
                                  __pyx_t_36 = __pyx_v_yy;
                                  __pyx_t_37 = 2;
                                  __pyx_v_blue = (*((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_rgb_array.data + __pyx_t_35 * __pyx_v_rgb_array.strides[0]) ) + __pyx_t_36 * __pyx_v_rgb_array.strides[1]) ) + __pyx_t_37 * __pyx_v_rgb_array.strides[2]) )));
</pre><pre class="cython line score-0">&#xA0;<span class="">453</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">454</span>:                         <span class="n">k</span> <span class="o">=</span> <span class="n">canny_kernel</span><span class="p">[</span><span class="n">kernel_offset_y</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>                                  __pyx_t_37 = (__pyx_v_kernel_offset_y + __pyx_v_kernel_half);
                                  __pyx_t_36 = (__pyx_v_kernel_offset_x + __pyx_v_kernel_half);
                                  __pyx_v_k = (*((float *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_canny_kernel.data + __pyx_t_37 * __pyx_v_canny_kernel.strides[0]) ) + __pyx_t_36 * __pyx_v_canny_kernel.strides[1]) )));
</pre><pre class="cython line score-0">&#xA0;<span class="">455</span>:                                          <span class="n">kernel_offset_x</span> <span class="o">+</span> <span class="n">kernel_half</span><span class="p">]</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">456</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">457</span>:                         <span class="n">r</span> <span class="o">+=</span> <span class="n">red</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_r = (__pyx_v_r + (__pyx_v_red * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">458</span>:                         <span class="n">g</span> <span class="o">+=</span> <span class="n">green</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_g = (__pyx_v_g + (__pyx_v_green * __pyx_v_k));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">459</span>:                         <span class="n">b</span> <span class="o">+=</span> <span class="n">blue</span> <span class="o">*</span> <span class="n">k</span></pre>
<pre class='cython code score-0 '>                                  __pyx_v_b = (__pyx_v_b + (__pyx_v_blue * __pyx_v_k));
                                }
                              }
</pre><pre class="cython line score-0">&#xA0;<span class="">460</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">461</span>:                 <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mf">255.0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_2 = ((__pyx_v_r &gt; 255.0) != 0);
                              if (__pyx_t_2) {
/* … */
                              }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">462</span>:                     <span class="n">r</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">255.0</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_r = ((float)255.0);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">463</span>:                 <span class="k">if</span> <span class="n">g</span> <span class="o">&gt;</span> <span class="mf">255.0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_2 = ((__pyx_v_g &gt; 255.0) != 0);
                              if (__pyx_t_2) {
/* … */
                              }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">464</span>:                     <span class="n">g</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">255.0</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_g = ((float)255.0);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">465</span>:                 <span class="k">if</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mf">255.0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_2 = ((__pyx_v_b &gt; 255.0) != 0);
                              if (__pyx_t_2) {
/* … */
                              }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">466</span>:                     <span class="n">b</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="mf">255.0</span></pre>
<pre class='cython code score-0 '>                                __pyx_v_b = ((float)255.0);
</pre><pre class="cython line score-0">&#xA0;<span class="">467</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">468</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_35 = 0;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_36 * __pyx_v_output_array.strides[0]) ) + __pyx_t_37 * __pyx_v_output_array.strides[1]) ) + __pyx_t_35 * __pyx_v_output_array.strides[2]) )) = ((unsigned char)__pyx_v_r);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">469</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">g</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_35 = __pyx_v_y;
                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_36 = 1;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_35 * __pyx_v_output_array.strides[0]) ) + __pyx_t_37 * __pyx_v_output_array.strides[1]) ) + __pyx_t_36 * __pyx_v_output_array.strides[2]) )) = ((unsigned char)__pyx_v_g);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">470</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">b</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_37 = __pyx_v_x;
                              __pyx_t_35 = 2;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_36 * __pyx_v_output_array.strides[0]) ) + __pyx_t_37 * __pyx_v_output_array.strides[1]) ) + __pyx_t_35 * __pyx_v_output_array.strides[2]) )) = ((unsigned char)__pyx_v_b);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">471</span>:                 <span class="n">output_array</span><span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="n">alpha</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                              __pyx_t_35 = __pyx_v_x;
                              __pyx_t_37 = __pyx_v_y;
                              __pyx_t_36 = __pyx_v_y;
                              __pyx_t_38 = __pyx_v_x;
                              __pyx_t_39 = 3;
                              *((unsigned char *) ( /* dim=2 */ (( /* dim=1 */ (( /* dim=0 */ (__pyx_v_output_array.data + __pyx_t_36 * __pyx_v_output_array.strides[0]) ) + __pyx_t_38 * __pyx_v_output_array.strides[1]) ) + __pyx_t_39 * __pyx_v_output_array.strides[2]) )) = ((unsigned char)(*((unsigned char *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_alpha.data + __pyx_t_35 * __pyx_v_alpha.strides[0]) ) + __pyx_t_37 * __pyx_v_alpha.strides[1]) ))));
                            }
                        }
                    }
                }
            }
        }
        #if ((defined(__APPLE__) || defined(__OSX__)) &amp;&amp; (defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; (__GNUC_MINOR__ &gt; 95)))))
            #undef likely
            #undef unlikely
            #define likely(x)   __builtin_expect(!!(x), 1)
            #define unlikely(x) __builtin_expect(!!(x), 0)
        #endif
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">472</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">473</span>:     <span class="c"># return asarray(output_array).astype(dtype=uint8)</span></pre>
<pre class="cython line score-55" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">474</span>:     <span class="k">return</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">output_array</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">),</span> <span class="s">&quot;RGBA&quot;</span><span class="p">)</span></pre>
<pre class='cython code score-55 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_frombuffer);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_9 = __pyx_memoryview_fromslice(__pyx_v_output_array, 3, (PyObject *(*)(char *)) __pyx_memview_get_unsigned_char, (int (*)(char *, PyObject *)) __pyx_memview_set_unsigned_char, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_8);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1, __pyx_t_7);
  __pyx_t_8 = 0;
  __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  __pyx_t_12 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_7)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      __pyx_t_12 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[4] = {__pyx_t_7, __pyx_t_9, __pyx_t_6, __pyx_n_u_RGBA};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_12, 3+__pyx_t_12);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[4] = {__pyx_t_7, __pyx_t_9, __pyx_t_6, __pyx_n_u_RGBA};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_12, 3+__pyx_t_12);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  {
    __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_12);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    if (__pyx_t_7) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_7); __pyx_t_7 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_9);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0+__pyx_t_12, __pyx_t_9);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1+__pyx_t_12, __pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_u_RGBA);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_u_RGBA);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 2+__pyx_t_12, __pyx_n_u_RGBA);
    __pyx_t_9 = 0;
    __pyx_t_6 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 474, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre></div></body></html>
